---
layout      : single
title       : "âš¾Chapter05 ì™¸êµ­ì¸ íˆ¬ìˆ˜ ìŠ¤ì¹´ìš°íŒ… ìµœì í™” 2 - ë°ì´í„° ì „ì²˜ë¦¬, ëª¨ë¸ êµ¬ì¶•ê³¼ ê²€ì¦"
categories  : Dacon
tag         : [dacon, python, analysis] 
toc : true
toc_label: "Contents"
toc_icon	: "list"
toc_sticky : True
author_profile : false
sidebar:
    nav : "docs"
---
<img src="/images/2022-04-08-dacon-1st/image-20220408102310504.png" alt="image-20220408102349708" style="zoom:50%;" />
{: .text-center}

## ë°ì´í„° ì „ì²˜ë¦¬[ğŸ“‘](#contents)<a id='3'></a>

* ì˜ˆì¸¡ ëª¨ë¸ì„ êµ¬ì¶•í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ë°ì´í„° ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ.
  * í•™ìŠµ(train) ë°ì´í„° : ëª¨ë¸ì„ í•™ìŠµí•  ë•Œ ì‚¬ìš©
  * ê²€ì¦(validation) ë°ì´í„° :í•™ìŠµëœ ëª¨ë¸ì„ íŠœë‹í•  ë•Œ ì‚¬ìš©
  * í…ŒìŠ¤íŠ¸(test) ë°ì´í„° : ëª¨ë¸ì˜ ì„±ëŠ¥ì„ ì‹œí—˜
* ì„±ëŠ¥ ì¢‹ì€ ëª¨ë¸ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ì„œëŠ” íŠœë‹ë„ ì¤‘ìš”í•˜ì§€ë§Œ, ì–‘ì§ˆì˜ ë°ì´í„°ë¡œ êµ¬ì„±ëœ í•™ìŠµ ë°ì´í„°ê°€ í•„ìš”
* Garbage in Garbage out í˜„ìƒ : ëª¨ë¸ì€ í•™ìŠµ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ êµ¬ì¶•ë˜ëŠ”ë°, í•™ìŠµ ë°ì´í„°ì˜ ì§ˆì´ ë‚˜ì˜ë©´ ëª¨ë¸ì˜ ì„±ëŠ¥ ë˜í•œ ì¢‹ì§€ ì•Šì€ í˜„ìƒ

### 1. ê°€ì„¤ì„ í™•ì¸í•˜ê¸° ìœ„í•œ íˆ¬ìˆ˜ ì§‘ë‹¨ ì„ ì •í•˜ê¸°

* ë°ì´í„° ë¶„ì„ì—ì„œëŠ” ë…¼ë¦¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë°ì´í„° ë¶„ì„ì„ ì§„í–‰í•´ ìµœì¢… ê²°ê³¼ë¬¼ì„ ë„ì¶œí•´ì•¼ í•¨

  * ê°€ì„¤ì„ ì„¸ìš°ê³ , ê°€ì„¤ì— ë¬¸ì œê°€ ì—†ìŒì„ ë°í˜ìœ¼ë¡œì¨ ë°ì´í„° ë¶„ì„ì„ ì „ê°œ
  * ê°€ì„¤ì˜ ì°¸ â€¢ ê±° ì§“ì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ê°€ì„¤ì„ ì–´ë–»ê²Œ ì •ëŸ‰ì ìœ¼ë¡œ ì¸¡ì •í•  ê²ƒì¸ì§€ ê²°ì •

* ì´ë²ˆ ëŒ€íšŒì—ì„œ ì„¸ìš´ ê°€ì„¤ì€ "KBOì—ì„œ ìš°ìˆ˜í•œ í™œì•½ì„ ë³´ì¸ íˆ¬ìˆ˜ë“¤ì€ MLBì—ì„œ ì œêµ¬ ë ¥ì´ ë›°ì–´ë‚  ê²ƒì´ë‹¤."

* ì´ ê°€ì„¤ì˜ ì°¸ â€¢ ê±°ì§“ íŒë³„ì„ ìœ„í•´ì„œëŠ” ë‹¤ìŒì„ ê²°ì •í•´ì•¼ í•¨

  1. ê°€ì„¤ í™•ì¸ì˜ ëŒ€ìƒì´ ë˜ëŠ” íˆ¬ìˆ˜ëŠ” ëˆ„êµ¬ì¸ê°€? (3_1) 
  2. KBOì—ì„œì˜ ìš°ìˆ˜í•œ í™œì•½ì€ ì–´ë–»ê²Œ ì¸¡ì •í•  ê²ƒì¸ê°€? (3_2)
  3. MLBì—ì„œì˜ ì œêµ¬ë ¥ì€ ì–´ë–»ê²Œ ì¸¡ì •í•  ê²ƒì¸ê°€? (4)

* ì´ ê°€ì„¤ì€ MLBì—ì„œì˜ íˆ¬êµ¬ ê¸°ë¡ê³¼ KBOì—ì„œì˜ íˆ¬êµ¬ ê¸°ë¡ì´ ëª¨ë‘ ê¸°ë¡ëœ íˆ¬ìˆ˜ì— ëŒ€í•´ì„œë§Œ í™•ì¸ ê°€ëŠ¥

* í•´ë‹¹ ì¡°ê±´ì— ë¶€í•©í•˜ëŠ” ì„ ìˆ˜ë¥¼ ì¶”ì¶œí•˜ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ì‚´í´ë´„

  > ëŒ€í™”ì—ì„œ ì œê³µí•œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸°

  ```python
  import pandas as pd
  
  #ë°ì´í„°ì…‹ ë¶ˆëŸ¬ì˜¤ê¸° 
  atKbo_11_18_KboRegSsn = pd.read_csv("data/chap05/kbo_yearly_foreigners_2011_2018.csv")
  
  atKbo_11_18_MlbTot = pd.read_csv("data/chap05/fangraphs_foreigners_2011_2018.csv")
  
  atKbo_11_18_StatCast = pd.read_csv("data/chap05/baseball_savant_foreigners_2011_2018.csv")
  
  atKbo_19_MlbTot = pd.read_csv("data/chap05/fangraphs_foreigners_2019.csv")
  
  atKbo_19_StatCast = pd.read_csv("data/chap05/baseball_savant_foreigners_2019.csv")
  ```

* `pandas` íŒ¨í‚¤ì§€ì˜ `read_csv()` í•¨ìˆ˜ë¥¼ í™œìš©í•´ CSV íŒŒì¼ì„ ì½ì„ ìˆ˜ ìˆìŒ

* ë³€ìˆ˜ë³„ ì €ì¥ëœ ë°ì´í„° ê°œìš”

  > 2011 ë…„ë¶€í„° 2018ë…„ê¹Œì§€ KBOì—ì„œ í™œì•½í•œ ì™¸êµ­ì¸ íˆ¬ìˆ˜

  | ë³€ìˆ˜ëª…                   | ë‚´ìš©                                 |
  | ------------------------ | ------------------------------------ |
  | atKbo_11_18_KboRegSsn    | ì—­ëŒ€ KBO ì •ê·œì‹œì¦Œ ì„±ì                |
  | atKbo_11_18_MlbTot KBO   | ì…ì„± ì „ MLBì—ì„œì˜ ì—­ëŒ€ ì •ê·œì‹œì¦Œ ì„±ì  |
  | atKboJ1 _18_StatCast KBO | ì…ì„± ì „ MLBì—ì„œì˜ ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°  |

  > 2019ë…„ ì‹ ê·œ KBO ì™¸êµ­ì¸ íˆ¬ìˆ˜

  | ë³€ìˆ˜ëª…           | ë‚´ìš©                         |
  | ---------------- | ---------------------------- |
  | atKbo_19_MlbTot  | MLBì—ì„œì˜ ì—­ëŒ€ ì •ê·œì‹œì¦Œ ì„±ì  |
  | atKboJ9_StatCast | MLBì—ì„œì˜ ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°  |

* ë°ì´í„°ë³„ ìƒìœ„ 10ê°œ í–‰ì„ í™•ì¸

* `pd.DataFrame.head()` í˜ìˆ˜ë¥¼ í†µí•´ í™•ì¸ ê°€ëŠ¥

  > KBO ì •ê·œì‹œì¦Œ ì„±ì 

  ```python
  atKbo_11_18_KboRegSsn.head(10)
  ```

  |      | pitcher_name | year | team |  ERA |  TBF |    H |   HR |   BB |  HBP |   SO | year_born |
  | ---: | -----------: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | --------: |
  |    0 |       ë‹ˆí¼íŠ¸ | 2011 | ë‘ì‚° | 2.55 |  763 |  150 |    8 |   64 |   10 |  150 |       NaN |
  |    1 |       ë‹ˆí¼íŠ¸ | 2012 | ë‘ì‚° | 3.20 |  785 |  156 |   15 |   68 |    8 |  126 |       NaN |
  |    2 |       ë‹ˆí¼íŠ¸ | 2013 | ë‘ì‚° | 3.58 |  482 |  108 |    7 |   34 |    4 |  104 |       NaN |
  |    3 |       ë‹ˆí¼íŠ¸ | 2014 | ë‘ì‚° | 3.81 |  760 |  186 |   17 |   48 |    6 |  158 |       NaN |
  |    4 |       ë‹ˆí¼íŠ¸ | 2015 | ë‘ì‚° | 5.10 |  404 |  104 |    4 |   33 |    4 |   76 |       NaN |
  |    5 |       ë‹ˆí¼íŠ¸ | 2016 | ë‘ì‚° | 2.95 |  701 |  151 |   15 |   57 |    9 |  142 |       NaN |
  |    6 |       ë‹ˆí¼íŠ¸ | 2017 | ë‘ì‚° | 4.06 |  782 |  175 |   20 |   77 |   10 |  161 |       NaN |
  |    7 |       ë‹ˆí¼íŠ¸ | 2018 |   KT | 4.25 |  765 |  209 |   26 |   39 |    9 |  165 |       NaN |
  |    8 |   ë‹¤ì´ì•„ëª¬ë“œ | 2017 |   SK | 4.42 |  581 |  163 |   11 |   35 |    9 |   59 |       NaN |
  |    9 |     ë“€ë¸Œë¡ íŠ¸ | 2018 | ë¡¯ë° | 4.92 |  629 |  162 |   13 |   62 |    8 |  109 |       NaN |

* KBO ê¸°ë¡ì—ëŠ” íŒ€ ì†Œì†ê³¼ ë”ë¶ˆì–´ ì—°ë„ë³„ ERA, TBF, H, HR ë“±ì˜ ì§€í‘œê°€ ê¸°ë¡

  > MLB ì •ê·œì‹œì¦Œ ì„±ì 

  ```python
  atKbo_11_18_MlbTot.head(10)
  ```

  |      | pitcher_name |   year |  ERA |  WAR |   TBF |     H |   HR |   BB |  HBP |    SO | WHIP | BABIP |  FIP |   LD% |   GB% |   FB% | IFFB% | SwStr% | Swing% |
  | ---: | -----------: | -----: | ---: | ---: | ----: | ----: | ---: | ---: | ---: | ----: | ---: | ----: | ---: | ----: | ----: | ----: | ----: | -----: | -----: |
  |    0 |       ì˜¤ê°„ë„ | 2011.0 | 3.51 |  3.3 | 693.0 | 149.0 | 16.0 | 43.0 |  7.0 | 126.0 | 1.14 | 0.265 | 3.65 | 0.237 | 0.364 | 0.674 | 0.147 |  0.090 |  0.475 |
  |    1 |         í—˜ë²„ | 2011.0 | 3.75 |  3.2 | 676.0 | 151.0 | 14.0 | 41.0 |  6.0 | 116.0 | 1.18 | 0.275 | 3.58 | 0.168 | 0.471 | 0.458 | 0.094 |  0.092 |  0.463 |
  |    2 |       ë£¨ì¹´ìŠ¤ | 2012.0 | 3.76 |  2.8 | 827.0 | 185.0 | 13.0 | 78.0 |  1.0 | 140.0 | 1.36 | 0.289 | 3.75 | 0.203 | 0.572 | 0.707 | 0.082 |  0.062 |  0.424 |
  |    3 |   ë‹¤ì´ì•„ëª¬ë“œ | 2012.0 | 3.54 |  2.2 | 714.0 | 184.0 | 17.0 | 31.0 |  4.0 |  90.0 | 1.24 | 0.292 | 3.94 | 0.210 | 0.534 | 0.597 | 0.040 |  0.068 |  0.467 |
  |    4 |     ë“€ë¸Œë¡ íŠ¸ | 2013.0 | 4.32 |  2.2 | 705.0 | 161.0 | 13.0 | 71.0 |  5.0 | 139.0 | 1.43 | 0.310 | 3.78 | 0.199 | 0.456 | 0.633 | 0.127 |  0.077 |  0.434 |
  |    5 |       ìŠ¤ì™€ì­ | 2017.0 | 2.33 |  2.2 | 303.0 |  58.0 |  6.0 | 22.0 |  2.0 |  91.0 | 1.03 | 0.286 | 2.74 | 0.155 | 0.439 | 0.485 | 0.145 |  0.142 |  0.500 |
  |    6 |     ë“€ë¸Œë¡ íŠ¸ | 2012.0 | 4.86 |  1.3 | 709.0 | 162.0 | 24.0 | 71.0 |  5.0 | 167.0 | 1.45 | 0.312 | 4.37 | 0.234 | 0.437 | 0.635 | 0.086 |  0.096 |  0.442 |
  |    7 |       íƒˆë³´íŠ¸ | 2010.0 | 4.41 |  1.2 | 696.0 | 169.0 | 13.0 | 69.0 |  8.0 |  88.0 | 1.49 | 0.301 | 4.48 | 0.169 | 0.478 | 0.495 | 0.070 |  0.060 |  0.428 |
  |    8 |   ë¹„ì•¼ëˆ„ì—ë°” | 2011.0 | 4.04 |  1.2 | 454.0 | 103.0 | 11.0 | 32.0 |  4.0 |  68.0 | 1.26 | 0.271 | 4.10 | 0.219 | 0.356 | 0.462 | 0.151 |  0.078 |  0.433 |
  |    9 |   ë¹„ì•¼ëˆ„ì—ë°” | 2014.0 | 4.64 |  1.2 | 343.0 |  89.0 |  6.0 | 19.0 |  3.0 |  72.0 | 1.39 | 0.342 | 3.13 | 0.202 | 0.413 | 0.474 | 0.161 |  0.113 |  0.486 |

* MLB ê¸°ë¡ì—ëŠ” ì—°ë„ë³„ ERA, TBF, H, HR ë“±ì˜ ì§€í‘œì™€ ë”ë¶ˆì–´ LD%, GB%, FB%, IFFB% ë“± ì˜ ì§€í‘œê°€ ê¸°ë¡

  > ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°

  ```python
  atKbo_11_18_StatCast.head(10)
  ```

  |      |  game_date | release_speed |   batter | pitcher |    events |         description | zone | stand | p_throws |    bb_type |  ... | plate_x | plate_z |      ax |     ay |      az | launch_speed | launch_angle | release_spin_rate |      pitch_name | pitcher_name |
  | ---: | ---------: | ------------: | -------: | ------: | --------: | ------------------: | ---: | ----: | -------: | ---------: | ---: | ------: | ------: | ------: | -----: | ------: | -----------: | -----------: | ----------------: | --------------: | -----------: |
  |    0 | 2010-10-09 |          93.0 | 425834.0 |  430962 | field_out |       hit_into_play |  4.0 |     R |        R |      popup |  ... |  -0.626 |   2.771 |  -6.404 | 26.077 |  -9.694 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    1 | 2010-10-09 |          95.2 | 150289.0 |  430962 |  home_run | hit_into_play_score |  5.0 |     L |        R |   fly_ball |  ... |  -0.112 |   2.401 | -10.168 | 28.786 |  -8.895 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    2 | 2010-10-09 |          94.3 | 150289.0 |  430962 |       NaN |                foul |  2.0 |     L |        R |        NaN |  ... |   0.272 |   3.052 |  -5.605 | 26.657 |  -7.794 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    3 | 2010-10-09 |          94.0 | 150289.0 |  430962 |       NaN |        blocked_ball | 13.0 |     L |        R |        NaN |  ... |  -1.193 |   0.632 |  -9.099 | 30.273 |  -6.371 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    4 | 2010-10-09 |          92.8 | 150289.0 |  430962 |       NaN |                ball | 14.0 |     L |        R |        NaN |  ... |   0.370 |   1.383 |  -5.846 | 27.290 | -11.262 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    5 | 2010-10-09 |          80.8 | 150289.0 |  430962 |       NaN |            foul_tip | 13.0 |     L |        R |        NaN |  ... |  -1.233 |   2.059 | -10.897 | 18.539 | -20.286 |          NaN |          NaN |               NaN |        Changeup |       ë‹ˆí¼íŠ¸ |
  |    6 | 2010-10-09 |          92.0 | 150289.0 |  430962 |       NaN |                ball |  9.0 |     L |        R |        NaN |  ... |   0.510 |   1.722 |  -6.251 | 27.786 | -10.031 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    7 | 2010-10-09 |          92.5 | 430632.0 |  430962 | field_out |       hit_into_play | 13.0 |     L |        R | line_drive |  ... |  -1.010 |   2.212 |  -8.279 | 26.466 |  -8.376 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    8 | 2010-10-09 |          91.2 | 430632.0 |  430962 |       NaN |                ball | 13.0 |     L |        R |        NaN |  ... |  -0.106 |   1.418 |  -9.239 | 25.490 | -13.556 |          NaN |          NaN |               NaN | 4-Seam Fastball |       ë‹ˆí¼íŠ¸ |
  |    9 | 2010-10-09 |          91.8 | 430632.0 |  430962 |       NaN |                ball | 11.0 |     L |        R |        NaN |  ... |  -1.426 |   2.971 | -12.090 | 25.659 | -15.250 |          NaN |          NaN |               NaN | 2-Seam Fastball |       ë‹ˆí¼íŠ¸ |

  10 rows Ã— 24 columns

* ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì—ëŠ” íˆ¬êµ¬ë³„ ì†ì„±ê°’ì´ ê¸°ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ¬ì†, íˆ¬êµ¬ ê²°ê³¼, êµ¬ì¢… ì´ë¦„ë“±ì´ ê¸°ë¡

* ë°ì´í„°ë³„ë¡œ ê¸°ë¡ëœ ì¹¼ëŸ¼ì´ ë‹¤ë¥´ì§€ë§Œ íˆ¬ìˆ˜ì˜ ì´ë¦„ ì •ë³´ëŠ” ëª¨ë“  ë°ì´í„°ì—ì„œ `pitcher.name` ì¹¼ëŸ¼ì— ê¸°ë¡

* ê·¸ëŸ°ë° 2011ë…„ë¶€í„° 2018ë…„ ì‚¬ì´ì— ê¸°ë¡ëœ ë°ì´í„°ë¼ì„œ ì¤‘ë³µëœ ì´ë¦„ ì¡´ì¬

* ë°ì´í„°ë³„ë¡œ ê³ ìœ  íˆ¬ìˆ˜ ì´ë¦„ì„ í™•ì¸í•˜ê¸° ìœ„í•´ íŒë‹¤ìŠ¤ì— ì„œ ì œê³µë˜ëŠ” `pd.Series.unique()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©

  > ê³ ìœ  íˆ¬ìˆ˜ ì´ë¦„ í™•ì¸

  ```python
  print('KBO:', len(atKbo_11_18_KboRegSsn['pitcher_name'].unique()))
  print('MLB:', len(atKbo_11_18_MlbTot['pitcher_name'].unique()))
  print('StatCast:', len(atKbo_11_18_StatCast['pitcher_name'].unique()))
  
  # ì‹¤í–‰ ê²°ê³¼
  KBO: 62
  MLB: 60
  StatCast: 60
  ```

* KBO, MLB, ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì—ëŠ” ê°ê° 62, 60, 60ëª…ì˜ ê³ ìœ  íˆ¬ìˆ˜ê°€ ì¡´ì¬

* ë°ì´í„° ì§‘ë‹¨ë³„ë¡œ ê¸°ë¡ëœ íˆ¬ìˆ˜ì˜ ìˆ˜ê°€ ë‹¤ë¦„

  <img src="/images/2022-04-15-dacon-chap05-2nd/5_3_1-1.png" style="zoom:33%;" />
  {: .text-center}

  > ë°ì´í„° ì§‘ë‹¨ë³„ ì„ ìˆ˜ ë¶„í¬

* ì•ì—ì„œ ì„¸ìš´ ê°€ì„¤ì„ í™•ì¸í•˜ë ¤ë©´ MLBì™€ KBOì— ëª¨ë‘ ê¸°ë¡ëœ ì„ ìˆ˜ê°€ í•„ìš”

* KBO, MLB. ìŠ¤íƒ¯ìºìŠ¤íŠ¸ì—ëŠ” ê°ê° ë‹¤ë¥¸ íˆ¬ìˆ˜ê°€ ê¸°ë¡

  * ì˜ˆë¥¼ ë“¤ì–´ ë²¨ë ˆìŠ¤í„° ì„ ìˆ˜ëŠ” MLB ë°ì´í„°ì—ë§Œ ê¸°ë¡ì´ ì¡´ì¬í•˜ê³ , ë¦¬ì¦ˆì™€ ì¹´ìŠ¤í‹°ìš” ì„ ìˆ˜ëŠ” KBOì™€ MLB ë°ì´í„°ì—ëŠ” ê¸°ë¡ì´ ìˆì§€ë§Œ ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì—ëŠ” ê¸°ë¡ì´ ì—†ìŒ
  * ê°€ì„¤ì„ í™•ì¸í•˜ê¸° ìœ„í•´ 3ê°œì˜ ë°ì´í„° ì§‘ë‹¨ ëª¨ ë‘ì—ì„œ ê¸°ë¡ì´ ì¡´ì¬í•˜ëŠ” ì„ ìˆ˜ë¥¼ ì¶”ì¶œ
  * ìœ„ ê·¸ë¦¼ì—ì„œ ì¤‘ì•™ì— ìˆëŠ” 57ëª…ì€ KBO,  MLB, ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì— ëª¨ë‘ ê¸°ë¡ëœ íˆ¬ìˆ˜ì´ë©° í•´ë‹¹ íˆ¬ìˆ˜ ì§‘ë‹¨ì„ íƒ€ê¹ƒ(target) ì§‘ë‹¨ì´ë¼ê³  ì •í•¨

* íˆ¬ìˆ˜ ì´ë¦„ì€ `pitcher_name` ì¹¼ëŸ¼ ì— ê¸°ë¡ë¼ ìˆìœ¼ë©°, ë°ì´í„°ë³„ `pitcher_name`ì˜ êµì§‘í•©ì„ êµ¬í•˜ê¸° ìœ„í•´ íŒŒì´ì¬ì˜ ì§‘í•© ì—°ì‚°ì„ ì‚¬ìš©

  > íƒ€ê¹ƒ ì§‘ë‹¨ì— ì†í•œ íˆ¬ìˆ˜ë¥¼ ì¶”ì¶œ

  ```python
  target = (set(atKbo_11_18_KboRegSsn['pitcher_name']) & 
            set(atKbo_11_18_MlbTot['pitcher_name']) &
            set(atKbo_11_18_StatCast['pitcher_name']))
  
  print(type(target)) 
  
  target = sorted(list(target))
  
  print(type(target)) 
  
  print(len(target))
  
  # ì‹¤í–‰ ê²°ê³¼
  <class 'set'>
  <class 'list'>
  57
  ```

* íŒŒì´ì¬ì—ì„œëŠ” set íƒ€ì…ì— ëŒ€í•´ ì§‘í•© ì—°ì‚°ì„ ì§€ì›í•˜ë©°, `set()` í•¨ìˆ˜ë¥¼ í†µí•´ ë‹¤ë¥¸ ë°ì´í„° íƒ€ì…ì„ setìœ¼ë¡œ ë³€í™˜ ê°€ëŠ¥

* ìœ„ì˜ ì½”ë“œì—ì„œëŠ” Series í˜•íƒœì¸ ë°ì´í„°ë¥¼ set í˜•íƒœë¡œ ë³€í™˜í•œ ë’¤, & ì—°ì‚°ìë¥¼ í†µí•´ êµì§‘í•©ì„ ì¶”ì¶œ

* ì¶”ì¶œëœ íƒ€ê¹ƒ ì§‘ë‹¨ì—ëŠ” 57ëª…ì˜ íˆ¬ìˆ˜ê°€ ì¡´ì¬

* ì´ë ‡ê²Œ KBO, MLB, ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì— ê¸°ë¡ì´ ì¡´ì¬í•˜ëŠ” íƒ€ê¹ƒ ì§‘ë‹¨ì´ ì¶”ì¶œë¨

* ì™¸êµ­ì¸ íˆ¬ìˆ˜ ìŠ¤ì¹´ìš°íŒ…ì€ ì„ ìˆ˜ ìœ¡ì„± ì°¨ì›ë³´ë‹¤ëŠ” íŒ€ ì„±ì  í–¥ìƒì— ì¦‰ì‹œ ê¸°ì—¬í•  ìˆ˜ ìˆëŠ” ì„ ìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì´ ëª©ì ì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ íˆ¬ìˆ˜ì˜ KBOì—ì„œì˜ íˆ¬ìˆ˜ ëŠ¥ë ¥ ì¸¡ì •ì€ KBO ì²« ë²ˆì§¸ ì‹œì¦Œì˜ í‰ê· ìì±…ì ì„ í†µí•´ í‰ê°€

  > íˆ¬ìˆ˜ë³„ë¡œ KBO ì²« ë²ˆì§¸ ì‹œì¦Œì˜ ë°ì´í„°ë¥¼ ì¶”ì¶œ

  ```python
  _idx = atKbo_11_18_KboRegSsn.query('pitcher_name in @target'). \
      groupby('pitcher_name')['year'].idxmin().values
  firstYearInKBO_11_18 = atKbo_11_18_KboRegSsn.loc[_idx,:]
  firstYearInKBO_11_18.head()
  ```

  |      | pitcher_name | year | team |   ERA |  TBF |    H |   HR |   BB |  HBP |   SO | year_born |
  | ---: | -----------: | ---: | ---: | ----: | ---: | ---: | ---: | ---: | ---: | ---: | --------: |
  |    0 |       ë‹ˆí¼íŠ¸ | 2011 | ë‘ì‚° |  2.55 |  763 |  150 |    8 |   64 |   10 |  150 |       NaN |
  |    8 |   ë‹¤ì´ì•„ëª¬ë“œ | 2017 |   SK |  4.42 |  581 |  163 |   11 |   35 |    9 |   59 |       NaN |
  |    9 |     ë“€ë¸Œë¡ íŠ¸ | 2018 | ë¡¯ë° |  4.92 |  629 |  162 |   13 |   62 |    8 |  109 |       NaN |
  |   10 |       ë ˆë‚˜ë„ | 2017 | ì‚¼ì„± |  6.80 |  243 |   70 |   11 |   27 |    6 |   28 |       NaN |
  |   11 |         ë ˆì˜¨ | 2016 | ì‚¼ì„± | 11.25 |   40 |   16 |    2 |    1 |    1 |    7 |       NaN |

* KBO ë°ì´í„°ì—ì„œ íƒ€ê¹ƒ ì§‘ë‹¨ì— ìˆëŠ” íˆ¬ìˆ˜ë“¤ì„ `pd.DataFrame.query()`í•¨ìˆ˜ë¥¼ í†µí•´ ì¶”ì¶œ

* `query()` í•¨ìˆ˜ ì•ˆì—ëŠ” í•¨ìˆ˜ íŠ¹ì„±ìƒ ë¬¸ìì—´ì´ ì…ë ¥ë¼ì•¼ í•¨

* ë¬¸ìì—´ë¡œëŠ” í™˜ê²½ì— ì €ì¥ëœ ë³€ìˆ˜ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ, ë¬¸ìì—´ ë‚´ì— íŠ¹ìˆ˜ë¬¸ì @ì„ ì‚¬ìš©í•˜ë©´ í˜„ì¬ í™˜ê²½ì— ìˆëŠ” `target` ë³€ìˆ˜ì— ì ‘ê·¼ ê°€ëŠ¥

* ê·¸í›„ `groupby` í•¨ìˆ˜ë¥¼ í†µí•´ `pitcher_name`ë³„ë¡œ ë°ì´í„°ë¥¼ ë¬¶ê³  ë‚˜ì„œ `year` ê°’ì´ ê°€ì¥ ì‘ì€ ì¸ë±ìŠ¤ë¥¼ ì¶”ì¶œí•´ `_idx` ë³€ìˆ˜ì— ì €ì¥

* ê°€ì¥ ì‘ì€ `year` ê°’ì´ í•´ë‹¹ íˆ¬ìˆ˜ì˜ KBO ì²« ë²ˆì§¸ ì‹œì¦Œ

* ì¶”ì¶œëœ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•´ KBO ë°ì´í„°ë¥¼ ì¸ë±ì‹±í•˜ë©´ íƒ€ê¹ƒ ì§‘ë‹¨ì˜ KBO ì²« ë²ˆì§¸ ì‹œì¦Œ ì„±ì ì´ ì¶”ì¶œ

### 2. ìœ íš¨í•œ ë°ì´í„° ì„ ì •í•˜ê¸°

* ì´ 57ëª… íˆ¬ìˆ˜ì˜ KBOì—ì„œì˜ ì²« ë²ˆì§¸ ì‹œì¦Œ ì„±ì ì„ ì¶”ì¶œí–ˆì§€ë§Œ ëª¨ë“  íˆ¬ìˆ˜ì˜ ê¸°ë¡ì´ ìœ íš¨í•˜ì§€ëŠ” ì•ŠìŒ 

* ì˜ˆì‹œ

  * ê°‘ê³¼ ì„ ì¤‘ì—ì„œ ê°€ìœ„ë°”ìœ„ë³´ë¥¼ ëˆ„ê°€ ë” ì˜í•˜ëŠ”ì§€ë¥¼ í‰ê°€í•˜ê¸° ìœ„ í•´ì„œëŠ” ê°ê°ì˜ ê°€ìœ„ë°”ìœ„ë³´ ìŠ¹ë¥ ì„ í™•ì¸
  * ê°‘ì€ ìŠ¹ë¥ ì´ 100%ì´ê³  ì„ì€ ìŠ¹ë¥ ì´ 40%ë¼ë©´ ê°‘ì´ ê°€ìœ„ë°”ìœ„ë³´ë¥¼ ë” ì˜í•œë‹¤ê³  í‰ê°€ ê°€ëŠ¥
  * í•˜ì§€ë§Œ ê°‘ì€ ê°€ìœ„ë°”ìœ„ë³´ë¥¼ í•œ ë²ˆ ì‹œë„í–ˆê³ , ì„ì€ 100ë²ˆ ì‹œë„í–ˆë‹¤ë©´ ê°‘ì˜ ìŠ¹ë¥ ì€ ì‹ ë¢°ì„± ìˆëŠ” ì§€í‘œë¼ê³  í•  ìˆ˜ ì—†ì„ ê²ƒ

* ì•¼êµ¬ì—ì„œë„ íˆ¬ìˆ˜ì˜ í™œì•½ìƒì„ í‰ê°€í•  ë•Œ ëŒ€í‘œì ìœ¼ë¡œ ì“°ì´ëŠ” ì§€í‘œëŠ” í‰ê· ìì±…ì ì´ê³  ì´ ì§€í‘œëŠ” ë‚®ì„ìˆ˜ë¡ ì¢‹ì€ ì§€í‘œ

* ê°€ìœ„ë°”ìœ„ë³´ì—ì„œ ìŠ¹ë¥ ì´ ê°€ìœ„ë°”ìœ„ë³´ë¥¼ ì‹œë„í•´ì•¼ ê¸°ë¡ë˜ëŠ” ê²ƒì²˜ëŸ¼ í‰ê· ìì±…ì  ë˜í•œ íˆ¬ìˆ˜ê°€ íƒ€ìë¥¼ ìƒëŒ€í•´ì•¼ ê¸°ë¡ë˜ëŠ” ì§€í‘œ 

* ê·¸ë ‡ê¸°ì— í‰ê· ìì±…ì ì€ íˆ¬ìˆ˜ê°€ ìƒëŒ€í•œ íƒ€ìì˜ ìˆ˜(Total Batters Faced, TBF)ì— ì˜í–¥ì„ ë°›ëŠ” ì§€í‘œ 

  |   íˆ¬ìˆ˜ A   |   íˆ¬ìˆ˜ B   |
  | :--------: | :--------: |
  | ERA : 2.45 | ERA : 2.00 |
  | TBF : 100  |  TBF : 20  |

  > ERAì™€ TBF ê°„ì˜ ê´€ê³„

* ìœ„ì˜ í‘œì™€ ê°™ì´ íˆ¬ìˆ˜ Aì™€ íˆ¬ìˆ˜ Bê°€ ìˆë‹¤ê³  ê°€ì •

  * íˆ¬ìˆ˜ AëŠ” ERAê°€ 2.45ê³  íˆ¬ìˆ˜ BëŠ” 2.00ì¼ ë•Œ íˆ¬ìˆ˜ Bê°€ ë” ì˜í•œë‹¤ê³  í‰ê°€ ê°€ëŠ¥ 
  * í•˜ì§€ë§Œ íˆ¬ìˆ˜ê°€ ìƒëŒ€í•œ íƒ€ì ìˆ˜ë¥¼ í™•ì¸í•´ ë³´ë‹ˆ íˆ¬ìˆ˜ AëŠ” 100ëª…ì˜ íƒ€ìë¥¼ íˆ¬ìˆ˜ BëŠ” 20ëª…ì˜ íƒ€ìë¥¼ ìƒëŒ€í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œìˆ˜ ìˆìŒ
  * ì‹œí–‰ íšŸìˆ˜ê°€ ì¶©ë¶„í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ëŸ° ê²½ìš° íˆ¬ìˆ˜ Bì˜ ERA 2.00ì€ íˆ¬ìˆ˜ Bë¥¼ ì •í™•í•˜ê²Œ í‰ê°€í•˜ëŠ” ì§€í‘œë¼ê³  ë³´ê¸°ì—ëŠ” í•œê³„ê°€ ìˆìŒ

* ë°˜ë©´, íˆ¬ìˆ˜ AëŠ” 100ëª…ì˜ íƒ€ìë¥¼ ìƒëŒ€í–ˆì„ ë•Œ ê¸°ë¡ëœ ERAê°€ 2.45ì´ë¯€ë¡œ ë¹„êµì  ì‹ ë¢°ë„ê°€ ë†’ê³  ì§ˆì´ ì¢‹ì€ ë°ì´í„°ë¼ê³  ë³¼ ìˆ˜ ìˆìŒ

* ì—¬ê¸°ì„œëŠ” 'Garbage In Garbage Out' ì´ë¡ ì— ê¸°ë°˜í•´ ìƒëŒ€í•œ íƒ€ì ìˆ˜ê°€ íŠ¹ì • íšŸìˆ˜ ì´ìƒì¸ ê¸°ë¡ ì¶”ì¶œ

* TBF íŠ¹ì„±ìƒ ë¶„ì‚°ì´ ì»¤ì„œ í‰ê· ìœ¼ë¡œ í•  ê²½ìš° ì´ìƒì¹˜ì— ì˜í–¥ì„ ë°›ê¸° ë•Œë¬¸ì— íŠ¹ì • íšŸìˆ˜ëŠ” íƒ€ê¹ƒ ì§‘ë‹¨ íˆ¬ìˆ˜ì˜ TBFì˜ ì¤‘ì•™ê°’ìœ¼ë¡œ ì •ì˜

* ERAê°€ ì „ì²´ì˜ ì¤‘ì•™ê°’ ì´í•˜ì¸ íˆ¬ìˆ˜ë¥¼ ìš°ìˆ˜í•œ í™œì•½ì„ ë³´ì¸ íˆ¬ìˆ˜ë¼ê³  ì •ì˜í•  ê²ƒì´ê¸° ë•Œë¬¸ì— TBFë¿ë§Œ ì•„ë‹ˆë¼ ERAë„ íƒ€ê¹ƒ ì§‘ë‹¨ íˆ¬ìˆ˜ì˜ ERAì˜ ì¤‘ì•™ê°’ë³´ë‹¤ ì‘ì€ ê¸°ë¡ë§Œ ì¶”ì¶œ

* ERA ë˜í•œ ë¶„ì‚°ì´ ì»¤ì„œ í‰ê·  ëŒ€ì‹  ì¤‘ì•™ê°’ì„ ê¸°ì¤€í•¨

  > TBFê°€ ì¤‘ì•™ê°’ ì´ìƒì´ê³  ERAê°€ ì¤‘ì•™ê°’ ì´í•˜ì¸ íˆ¬ìˆ˜ë¥¼ ì¶”ì¶œ

  ```python
  TBF_median = firstYearInKBO_11_18['TBF'].median()
  ERA_median = firstYearInKBO_11_18['ERA'].median()
  Elite_11_18 = firstYearInKBO_11_18.query('TBF >= @TBF_median & ERA <= @ERA_median')
  Elite_11_18
  ```

  |      | pitcher_name | year | team |  ERA |  TBF |    H |   HR |   BB |  HBP |   SO |        year_born |
  | ---: | -----------: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---------------: |
  |    0 |       ë‹ˆí¼íŠ¸ | 2011 | ë‘ì‚° | 2.55 |  763 |  150 |    8 |   64 |   10 |  150 |              NaN |
  |    8 |   ë‹¤ì´ì•„ëª¬ë“œ | 2017 |   SK | 4.42 |  581 |  163 |   11 |   35 |    9 |   59 |              NaN |
  |   12 |     ë ˆì´ì˜ˆìŠ¤ | 2013 |   SK | 4.84 |  751 |  157 |   15 |   91 |    7 |  135 |              NaN |
  |   14 |       ë ˆì¼ë¦¬ | 2015 | ë¡¯ë° | 3.91 |  768 |  182 |   20 |   57 |   15 |  134 | 1988ë…„ 06ì›” 29ì¼ |
  |   25 |     ë¦°ë“œë¸”ëŸ¼ | 2015 | ë¡¯ë° | 3.56 |  861 |  196 |   28 |   52 |   12 |  180 | 1987ë…„ 06ì›” 15ì¼ |
  |   37 |       ë³´ìš°ë´ | 2016 | ë‘ì‚° | 3.80 |  742 |  159 |   17 |   54 |    6 |  160 |              NaN |
  |   43 |         ìƒ˜ìŠ¨ | 2018 | í•œí™” | 4.68 |  703 |  144 |   17 |   79 |    5 |  195 |              NaN |
  |   45 |         ì„¸ë“  | 2013 |   SK | 2.98 |  780 |  169 |   14 |   73 |   11 |  160 |              NaN |
  |   48 |         ì†Œì‚¬ | 2012 |  KIA | 3.54 |  614 |  137 |    9 |   39 |    8 |  104 |              NaN |
  |   67 |         ì›¨ë²„ | 2014 |   NC | 4.58 |  512 |  132 |   13 |   42 |    3 |   85 |              NaN |
  |  103 |         ìœŒìŠ¨ | 2018 |   LG | 3.07 |  689 |  158 |   11 |   35 |    6 |  149 | 1989ë…„ 09ì›” 25ì¼ |
  |   75 |       íƒˆë³´íŠ¸ | 2012 | ì‚¼ì„± | 3.97 |  584 |  136 |    8 |   54 |    5 |   68 |              NaN |
  |   79 |         íŒ»ë”˜ | 2017 |  KIA | 4.14 |  770 |  211 |   22 |   39 |   16 |  143 |              NaN |
  |   82 |       í”¼ê°€ë¡œ | 2015 | ì‚¼ì„± | 3.38 |  688 |  154 |   16 |   51 |    7 |  117 |              NaN |
  |   84 |     í”¼ì–´ë°´ë“œ | 2015 | ë„¥ì„¼ | 4.67 |  774 |  202 |   23 |   61 |   12 |  137 |              NaN |
  |   88 |         í•´ì»¤ | 2013 |   NC | 3.63 |  744 |  163 |   12 |   50 |   17 |  127 |              NaN |
  |   97 |         í—¥í„° | 2016 |  KIA | 3.40 |  868 |  211 |    7 |   51 |    6 |  139 |              NaN |
  |  100 |     í›„ë­ì½”í”„ | 2018 | ë‘ì‚° | 3.74 |  621 |  118 |   12 |   55 |   22 |  134 | 1988ë…„ 08ì›” 27ì¼ |

* ë¨¼ì € TBFì˜ ì¤‘ì•™ê°’ê³¼ ERAì˜ ì¤‘ì•™ê°’ì„ `pd.Series.median()` í•¨ìˆ˜ë¥¼ í†µí•´ ê³„ì‚°í•´ ê°ê° ë³€ìˆ˜ ì— ì €ì¥

* ê·¸ëŸ¬ê³  ë‚˜ì„œ `pd.DataFrame.query()` í•¨ìˆ˜ë¥¼ í†µí•´ ë°ì´í„°í”„ë ˆì„ ë‚´ì—ì„œ TBF ì¤‘ì•™ê°’ ì´ìƒì´ë©´ì„œ ERA ì¤‘ì•™ê°’ë³´ë‹¤ ë‚®ì€ ê¸°ë¡ì„ ì¶”ì¶œ

* í•´ë‹¹ ê³¼ì •ì„ í†µí•´ ì´ 18ëª…ì˜ íˆ¬ìˆ˜ ê¸°ë¡ì´ ì¶”ì¶œëìŠµë‹ˆë‹¤ 18ëª…ì˜ íˆ¬ìˆ˜ëŠ” ì„±ì ì´ ìœ íš¨í•˜ê²Œ ìš°ìˆ˜í•œ íˆ¬ìˆ˜

* TBF ê¸°ë¡ì´ íŠ¹ì • íšŸìˆ˜ë³´ë‹¤ ë†’ì€ íˆ¬ìˆ˜ë“¤ì„ ì¶”ì¶œí•´ íˆ¬ìˆ˜ ê¸°ë¡ì˜ ìœ íš¨ì„±ì„ í™•ë³´í–ˆê³ , ERAë¥¼ íŠ¹ì • ì§€í‘œë³´ë‹¤ ë‚®ì€ íˆ¬ìˆ˜ë“¤ì„ ì¶”ì¶œí•´ íˆ¬êµ¬ ì‹¤ë ¥ì˜ ìš°ìˆ˜ì„±ì„ í™•ë³´

* ë‹¤ìŒ ì ˆì—ì„œëŠ” í•´ë‹¹ íˆ¬ìˆ˜ë“¤ì˜ ë°ì´í„°ë¥¼ í™œìš©í•´ í‰ê· ìì±…ì ê³¼ ì œêµ¬ë ¥ê³¼ì˜ ê´€ê³„ë¥¼ ë¶„ì„í•˜ê³  ìŠ¤ì¹´ìš°íŒ… ëª¨ë¸ì„ êµ¬ì¶•í•´ ë´„

## ëª¨ë¸ êµ¬ì¶•ê³¼ ê²€ì¦[ğŸ“‘](#contents)<a id='4'></a>

* íˆ¬ìˆ˜ ì˜ì…ì˜ ëª©ì ì€ ì¢‹ì€ ì„±ì ì„ ë‚¼ íˆ¬ìˆ˜ë¥¼ ì˜ì…í•˜ëŠ” ê²ƒì„
  * íˆ¬ìˆ˜ ê°œì¸ì˜ ëŠ¥ë ¥ì´ ë›°ì–´ë‚ ìˆ˜ë¡ ì¢‹ì€ ì„±ì ì„ ëƒ„
  * ë”°ë¼ì„œ í•´ë‹¹ ëŠ¥ë ¥ì„ ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•˜ëŠ” ì§€í‘œê°€ í•„ìš”
  * ëª¨ë¸ì€ ì •í˜•í™”ëœ í”„ë¡œì„¸ìŠ¤ì´ë©° í•¨ìˆ˜ì™€ ê°™ê¸°ë•Œë¬¸ì— ê°’ì´ ì£¼ì–´ì¡Œì„ ë•Œ ì •í•´ì§„ í•˜ë‚˜ì˜ ê°’ì„ ë°˜í™˜ í•˜ëŠ” ëª¨ë¸
* ì´ë²ˆ ì ˆì—ì„œëŠ” MLB ë°ì´í„°ê°€ ì£¼ì–´ì¡Œì„ ë•Œ íˆ¬ìˆ˜ì˜ ëŠ¥ë ¥ì„ í‰ê°€í•˜ëŠ” ì œêµ¬ë ¥ ì§€í‘œì™€ ì•„ì›ƒ í™•ë¥ ì„ ì‚°ì¶œí•˜ëŠ” ëª¨ë¸ì„ ë§Œë“¤ ì˜ˆì •
* í•´ë‹¹ ì§€í‘œë¥¼ í†µí•´ íˆ¬ìˆ˜ë“¤ì˜ ìˆœìœ„ ë¥¼ ë§¤ê¸´ í›„ ìˆœìœ„ê°€ ê°€ì¥ ë†’ì€ íˆ¬ìˆ˜ë¥¼ ì˜ì…í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì¶•í•¨

### 1. ì„ í˜•íšŒê·€ë¶„ì„

* ë°ì´í„° ì „ì²˜ë¦¬ íŒŒíŠ¸ì—ì„œ TBF ì¤‘ì•™ê°’ê³¼ ERA ì¤‘ì•™ê°’ì„ í™œìš©í•´ KBOì—ì„œ ìœ íš¨í•˜ë©´ì„œë„ ìš°ìˆ˜í•œ í™œì•½ì„ ë³´ì¸ íˆ¬ìˆ˜ë¥¼ ì„ ì •í•¨

* ì´ë²ˆì—ëŠ” í•´ë‹¹ íˆ¬ìˆ˜ë“¤ì´ KBOì— ì…ì„± ì „ MLBì—ì„œ ê°€ì§€ê³  ìˆë˜ íŠ¹ì„±ì„ ì„ í˜•íšŒê·€ë¶„ì„ì„ í†µí•´ ë°í˜€ë‚¼ ê²ƒì„

* MLBì˜ ë°ì´í„°ëŠ” ìŠ¤ì¹´ìš°íŒ… ì‹œì ì— í™•ì¸ì´ ê°€ëŠ¥í•œ ë°ì´í„°ì´ë¯€ë¡œ í•´ë‹¹ ë°ì´í„°ë¥¼ í™œìš©í•´ íˆ¬ìˆ˜ì˜ ëŠ¥ë ¥ì„ í‰ê°€í•˜ê³  ìˆœìœ„ë¥¼ ë§¤ê¸¸ ìˆ˜ ìˆìŒ

* íƒìƒ‰ì  ë°ì´í„° ë¶„ì„ íŒŒíŠ¸ì—ì„œ í™•ì¸í–ˆë“¯ì´, MLB ë°ì´í„°ëŠ” ì—°ë„ë³„ í†µê³„ ì§€í‘œì™€ íˆ¬êµ¬ë³„ ì§€í‘œê°€ ì¡´ì¬

* ì—°ë„ë³„ í†µê³„ ì§€í‘œê°€ ê¸°ë¡ëœ íŒ¬ê·¸ë˜í”„ ë°ì´í„°ë¥¼ í™œìš©í•´ KBO ì…ì„± ì „ íˆ¬ìˆ˜ì˜ íŠ¹ì„±ì„ ë°íˆëŠ” ê²ƒì€ ì œí•œì ì„

* íˆ¬ìˆ˜ì˜ ê³ ìœ  ëŠ¥ë ¥ì„ ëŒ€ë³€í•  ìˆ˜ ìˆëŠ” ì§€í‘œê°€ ì—†ê¸° ë•Œë¬¸

* íŒ¬ê·¸ë˜í”„ ë°ì´í„°ì…‹ì— ê¸°ë¡ëœ ì§€í‘œë“¤ì€ ì†Œì†íŒ€ì˜ ìˆ˜ë¹„ ëŠ¥ë ¥ì´ë‚˜ ë¦¬ê·¸ ìˆ˜ì¤€ ë˜ëŠ” ê²½ê¸°ì¥ ìš”ì¸ì— ì˜í–¥ì„ ë°›ìœ¼ë¯€ë¡œ íˆ¬ìˆ˜ì˜ ê³ ìœ  ëŠ¥ë ¥ì„ ëŒ€í‘œí•˜ëŠ” ì§€í‘œë¡œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ì œí•œì ì„

* í•˜ì§€ë§Œ íˆ¬ìˆ˜ì˜ ì œêµ¬ë ¥ì€ ì™¸ë¶€ ìš”ì¸ì˜ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ” íˆ¬ìˆ˜ ê³ ìœ ì˜ ëŠ¥ë ¥ì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŒ

* ì œêµ¬ë ¥ì€ ë³¸ì¸ íŒ€ì˜ ìˆ˜ë¹„ìˆ˜ê°€ ê°œì…í•˜ê¸° ì „ì— í‰ê°€í•  ìˆ˜ ìˆëŠ” ìš”ì†Œì´ë¯€ë¡œ íˆ¬êµ¬ë¥¼ ë” ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•  ìˆ˜ ìˆëŠ” ì§€í‘œ

* ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì—ëŠ” íˆ¬êµ¬ë³„ ë°ì´í„°ê°€ ê¸°ë¡ë¼ ìˆìœ¼ë¯€ë¡œ í•´ë‹¹ ë°ì´í„°ë¥¼ í™œìš©í•´ ì œêµ¬ë ¥ì„ ìˆ˜ì¹˜í™”í•´ ë´„

  > ê³µì´ í™ˆ í”Œë ˆì´íŠ¸ë¥¼ ì§€ë‚  ë•Œì˜ ìœ„ì¹˜ë¥¼ ì‹œê°í™”

  ```python
  import seaborn as sns
  import matplotlib.pyplot as plt
  plt.figure(figsize = (10,10))
  sns.set_style('darkgrid')
  sns.scatterplot(data = atKbo_11_18_StatCast.sort_values('pitch_name'), 
                  x = 'plate_x', 
                  y = 'plate_z', 
                  hue = 'pitch_name', 
                  alpha = 0.1)
  plt.show()
  ```

  ![](/images/2022-04-15-dacon-chap05-2nd/5_4_1-1.png)
  {: .text-center}

* `plate_x` ì¹¼ëŸ¼ì—ëŠ” ê³µì´ í™ˆ í”Œë ˆì´íŠ¸ë¥¼ ì§€ë‚  ë•Œì˜ ìˆ˜í‰ ìœ„ì¹˜ê°€ ê¸°ë¡ë˜ì–´ ìˆìœ¼ë©° `plate_z` ì¹¼ëŸ¼ì—ëŠ” ê³µì´ í™ˆ í”Œë ˆì´íŠ¸ë¥¼ ì§€ë‚  ë•Œì˜ ìˆ˜ì§ ìœ„ì¹˜ê°€ ê¸°ë¡ë˜ì–´ ìˆìŒ

* í•´ë‹¹ ê°’ë“¤ì„ `Seaborn` ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” `scatterplot` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì¢Œí‘œ í‰ë©´ì— ë‚˜íƒ€ë‚´ë©´ ìœ„ì™€ ê°™ì€ ê·¸ë¦¼ì´ ì‚°ì¶œë¨

* ë‹¨ìˆœíˆ íˆ¬êµ¬ì˜ ì¢Œí‘œ ìœ„ì¹˜ë§Œ ê¸°ë¡ë¼ ìˆì–´ ìƒëŒ€ì ìœ¼ë¡œ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì—ì„œ ì–¼ë§ˆ ë‚˜ ë©€ë¦¬ ìˆëŠ”ì§€ ê°€ëŠ í•˜ê¸°ê°€ ì–´ë ¤ì›€

  >  ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì„ í•¨ê»˜ ì‹œê°í™”

  ![](/images/2022-04-15-dacon-chap05-2nd/5_4_1-2.png)
  {: .text-center}

* ìŠ¤íƒ¯ìºìŠ¤íŠ¸ì—ì„œ ê³µì‹ì ì¸ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì˜ ì¢Œí‘œ ë²”ìœ„ë¥¼ ê³µì§€ëŠ” ë˜ì–´ ìˆì§€ ì•Šì§€ë§Œ ê°ì¢… ì•¼êµ¬ ì»¤ë®¤ë‹ˆí‹°ì—ì„œëŠ” ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì˜ ë²”ìœ„ë¥¼ xì¶• -1ì—ì„œ 1 ì‚¬ì´, yì¶• 1.5ì—ì„œ 3.5 ì‚¬ì´ë¡œ ì¶”ì •í•˜ë¯€ë¡œ í•´ë‹¹ ì¢Œí‘œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì„ ì‹œê°í™”í•¨

* ëª¨ë“  íˆ¬êµ¬ë¥¼ ì‹œê°í™”í–ˆê¸° ë•Œë¬¸ì— ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì—ì„œ ìƒë‹¹íˆ ë²—ì–´ë‚œ íˆ¬êµ¬ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸ ê°€ëŠ¥

* ê³ ì˜ ì‚¬êµ¬ë‚˜ í”¼ì¹˜ì•„ì›ƒì€ íˆ¬êµ¬ íŠ¹ì„±ìƒ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì—ì„œ ë§ì´ ë²—ì–´ë‚˜ê¸° ë•Œë¬¸ì„

* ìŠ¤íƒ¯ìºìŠ¤íŠ¸ì˜ `description` ì¹¼ëŸ¼ì—ëŠ” íˆ¬êµ¬ë³„ ê²°ê³¼ê°€ ê¸°ë¡

* ê·¸ì¤‘ ìŠ¤íŠ¸ë¼ì´í¬ì¸ `called_strike` íˆ¬êµ¬ë§Œ ê´€ì‹¬ì„ ê°–ê³  ì•ì—ì„œ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ ê°€ì¥ìë¦¬ì— ìˆëŠ” `called_strike`ëœ íˆ¬êµ¬ê°€ ëª¨ë“  íˆ¬ìˆ˜ê°€ ëª©í‘œë¡œ í•˜ëŠ” íˆ¬êµ¬ë¼ê³  ê°€ì •í–ˆê¸° ë•Œë¬¸

  > called_strike íˆ¬êµ¬ë§Œ ì‹œê°í™”

  ```python
  plt.figure(figsize = (10,10))
  sns.set_style('darkgrid')
  sns.scatterplot(data = (atKbo_11_18_StatCast.
                          sort_values('pitch_name').
                          query('description == "called_strike"')), 
                  x = 'plate_x', 
                  y = 'plate_z', 
                  hue = 'pitch_name', 
                  alpha = 0.1)
  plt.plot([-1, -1], [1.5, 3.5], 'black')
  plt.plot([1, 1], [1.5, 3.5], 'black')
  plt.plot([-1, 1], [1.5, 1.5], 'black')
  plt.plot([-1, 1], [3.5, 3.5], 'black')
  plt.show()
  ```

  ![](/images/2022-04-15-dacon-chap05-2nd/5_4_1-3.png)
  {: .text-center}

* ìŠ¤íŠ¸ë¼ì´í¬ì¸ íˆ¬êµ¬ë§Œ ì¶”ì¶œí•´ ì‹œê°í™”í•´ ë³´ë‹ˆ ì„ì˜ë¡œ ì •ì˜í•œ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ ë‚´ë¶€ì— ëŒ€ë¶€ë¶„ íˆ¬êµ¬ê°€ ìœ„ì¹˜í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ

* ì •í™•í•œ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì˜ ìœ„ì¹˜ëŠ” íƒ€ìë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, í•„ìê°€ ì •ì˜í•œ ê²€ì •ìƒ‰ ì„ ì˜ ì •ì‚¬ê°í˜• ë°”ê¹¥ ë¶€ë¶„ì—ë„ ìŠ¤íŠ¸ë¼ì´í¬ íŒì •ëœ ê³µì´ ì¡´ì¬

* í•„ìëŠ” ì´ íˆ¬êµ¬ë“¤ ì¤‘ì—ì„œë„ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ ê°€ì¥ìë¦¬ì— ìˆëŠ” íˆ¬êµ¬ë“¤ì´ì•¼ ë§ë¡œ ì œêµ¬ë ¥ì´ ì˜ ë°˜ì˜ëœ íˆ¬êµ¬ë¼ê³  ì •ì˜í•¨

* í•´ë‹¹ íˆ¬êµ¬ ì¤‘ì—ì„œëŠ” ê¶¤ì ì´ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ ë°–ìœ¼ë¡œ ìœ„ì¹˜í•  ê²ƒì²˜ëŸ¼ ë‚ ì•„ì˜¤ë‹¤ê°€ ë§ˆì§€ë§‰ì— ë³€í™”ì—¬ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì— ê±¸ì¹œ íˆ¬êµ¬ë“¤ì´ í¬í•¨ëì„ ê²ƒì„

* ì´ëŸ° íˆ¬êµ¬ë“¤ì´ íˆ¬ìˆ˜ê°€ ëª©í‘œë¡œ í•˜ëŠ” íˆ¬êµ¬ë¼ê³  ê°€ì •í–ˆìœ¼ë©°, ê·¸ë ‡ê²Œ ë˜ì§ˆ ìˆ˜ ìˆëŠ” êµ¬ì¢…ì´ ë§ì„ìˆ˜ë¡ ì œêµ¬ë ¥ì´ ë†’ì„ ê²ƒì´ë¼ê³  ê°€ì •í•¨

  > ê°€ì¥ìë¦¬ì— ìˆëŠ” íˆ¬êµ¬ë“¤ì„ ì‹œê°í™”

  ```python
  edgePitches = \
  (atKbo_11_18_StatCast.query(
  '(plate_x >= 0.8 & plate_x <= 1.2 & plate_z <= 3.7 & plate_z >= 1.3) | \
   (plate_x <= -0.8 & plate_x >= -1.2 & plate_z <= 3.7 & plate_z >= 1.3) | \
   (plate_x >= -0.8 & plate_x <= 0.8 & plate_z <= 1.7 & plate_z >= 1.3) | \
   (plate_x >= -0.8 & plate_x <= 0.8 & plate_z <= 3.7 & plate_z >= 3.3)').
                 query('pitch_name.notnull()', engine='python').
                 query('description == "called_strike"'))
  
  plt.figure(figsize = (10,10))
  sns.set_style('darkgrid')
  sns.scatterplot(data = edgePitches,
                  x = 'plate_x', 
                  y = 'plate_z', 
                  hue = 'pitch_name', 
                  alpha = 0.1)
  plt.plot([-1, -1], [1.5, 3.5], 'black')
  plt.plot([1, 1], [1.5, 3.5], 'black')
  plt.plot([-1, 1], [1.5, 1.5], 'black')
  plt.plot([-1, 1], [3.5, 3.5], 'black')
  plt.show()
  ```

  ![](/images/2022-04-15-dacon-chap05-2nd/5_4_1-4.png)
  {: .text-center}

* ìš°ì„  ê°€ì¥ìë¦¬ì— ëŒ€í•œ ì •ì˜ë¥¼ ë‚´ë ¤ë³´ë©´ ì¸¡ë©´ë‹¹ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ í¬ê¸°ì˜ 20%ë§Œí¼ ê°€ì¥ìë¦¬ë¥¼ ë¶€ì—¬í•¨

  * ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ì˜ ê°€ë¡œ ì„¸ë¡œ ê¸¸ì´ê°€ 2ëŒ€ 2 ì •ì‚¬ê°í˜•ì´ë¯€ë¡œ ì¸¡ë©´ë‹¹ 0.2ë§Œí¼ ì”© ë”í•˜ê³  ì°¨ê°í•¨ìœ¼ë¡œì¨ ê°€ì¥ìë¦¬ë¥¼ ì •ì˜ë‚´ë¦¼
  * ê·¸ë¦¬ê³  í•´ë‹¹ ë²”ìœ„ì— ì†í•˜ëŠ” `called_strike`íˆ¬êµ¬ë“¤ì„ ì¶”ì¶œí•´ `edgePitches` ë³€ìˆ˜ì— ì €ì¥í•¨
  * ì´ë•Œ `pitch_name` ì¹¼ëŸ¼ì— ê²°ì¸¡ì¹˜ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ëŠ” ì‚­ì œí•¨
  * ê·¸ ì´ìœ ëŠ” ì¶”í›„ êµ¬ì¢…ë³„ ë¹„ìœ¨ì„ ì‚°ì¶œí•  í…ë°, ê²°ì¸¡ê°’ì´ í¬í•¨ë¼ ìˆìœ¼ë©´ ë¹„ìœ¨ ì‚°ì •ì— ì˜í–¥ì„ ë¯¸ì¹˜ê¸° ë•Œë¬¸

* ì œêµ¬ë ¥ì€ íˆ¬ìˆ˜ë¥¼ ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•  ìˆ˜ ìˆëŠ” ìš”ì†Œë¼ê³  ì†Œê°œí•¨

  * ì´ëŸ¬í•œ ìš”ì†Œë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ì¶”ê°€ ì •ì˜ê°€ í•„ìš”
  * ì—¬ê¸°ì„œëŠ” ì œêµ¬ë ¥ì„ ì¸¡ì •í•˜ê¸° ìœ„í•´ ê°€ì¥ìë¦¬ì— ë¶„í¬í•œ `called_strike`ëœ íˆ¬êµ¬ ì¤‘ êµ¬ì¢… ë¹„ìœ¨ì´ 10%ê°€ ë„˜ëŠ” ê²ƒì„ ìœ íš¨í•œ êµ¬ì¢…ì´ë¼ê³  ì •ì˜í•  ê²ƒì´ê³ , í•´ë‹¹ êµ¬ì¢…ì˜ ê°œìˆ˜ë¡œ íˆ¬ìˆ˜ì˜ ì œêµ¬ë ¥ì„ í‰ê°€í•  ê²ƒì„
  * ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ ê°€ì¥ìë¦¬ì— ìœ„ì¹˜ í•˜ëŠ” íˆ¬êµ¬ ì¤‘ ìš°ì—°íˆ ë“¤ì–´ì˜¨ ê²ƒë„ ìˆì„ ìˆ˜ ìˆê¸°ì— 10% ì¡°ê±´ì„ ì£¼ì–´ ë°°ì œ
  *  ì •ì˜í•œ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” êµ¬ì¢…ì˜ ê°œìˆ˜ê°€ ë§ë‹¤ëŠ” ê²ƒì€ ê·¸ë§Œí¼ ì œêµ¬ë ¥ì´ ë›°ì–´ë‚˜ë‹¤ê³ ë„ ë³¼ ìˆ˜ ìˆê¸°ì— í•´ë‹¹ ë°© ë²•ì„ ì‚¬ìš©

  > ê°€ì¥ìë¦¬ì— ìœ„ì¹˜í•œ êµ¬ì¢…ë³„ íˆ¬êµ¬ ìˆ˜ ì‚°ì¶œ

  ```python
  (edgePitches[['pitcher_name', 'pitch_name', 'game_date']].
   groupby(['pitcher_name', 'pitch_name']).
   count().
   head(10))
  ```

  |              |                 | game_date |
  | -----------: | --------------: | --------: |
  | pitcher_name |      pitch_name |           |
  |       ë‹ˆí¼íŠ¸ | 2-Seam Fastball |         1 |
  |              | 4-Seam Fastball |        18 |
  |              |        Changeup |         3 |
  |              |       Curveball |         3 |
  |   ë‹¤ì´ì•„ëª¬ë“œ | 2-Seam Fastball |         7 |
  |              | 4-Seam Fastball |       155 |
  |              |        Changeup |        10 |
  |              |       Curveball |        36 |
  |     ë“€ë¸Œë¡ íŠ¸ | 2-Seam Fastball |        80 |
  |              | 4-Seam Fastball |       194 |

* ê°€ì¥ìë¦¬ íˆ¬êµ¬ ì •ë³´ê°€ ì €ì¥ëœ `edgePitches` ë³€ìˆ˜ë¡œë¶€í„° í•„ìš”í•œ ì¹¼ëŸ¼ë“¤ë§Œ ì¶”ì¶œ 

* `pitcher_name`ê³¼ `pitch_name` ì¹¼ëŸ¼ì€ ê·¸ë£¹í•‘ì„ í•˜ê¸° ìœ„í•œ ê¸°ì¤€ ì¹¼ëŸ¼ì´ê³ , `game_date`ëŠ” íˆ¬êµ¬ ê°œìˆ˜ë¥¼ ì‚°ì¶œí•˜ê¸° ìœ„í•œ ë”ë¯¸ ì¹¼ëŸ¼

* ê·¸ë‹¤ìŒ, `pitcher_name`ê³¼ `pitch_name` ê¸°ì¤€ìœ¼ë¡œ `groupby`ë¥¼ ì‹¤ì‹œí•œ í›„ `count` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ íˆ¬ìˆ˜ë³„ êµ¬ì¢…ì˜ ê°œìˆ˜ê°€ ì‚°ì¶œ

* ì—¬ê¸°ì—ì„œ ì‚°ì¶œëœ ê°œìˆ˜ëŠ” `edgePitches`ì— ê¸°ë¡ëœ ìŠ¤íŠ¸ë¼ì´í¬ ì¡´ ê°€ì¥ìë¦¬ì— ìˆëŠ” íˆ¬êµ¬ ì¤‘ `called_strike` ëœ ê²ƒë“¤ë§Œ ì‚°ì¶œí•œ ê²ƒì„ì„ ë‹¤ì‹œ í•œë²ˆ ê°•ì¡°

  > íˆ¬êµ¬ë“¤ì˜ ìƒëŒ€ì ì¸ ë¹„ìœ¨ì„ ì‚°ì¶œ

  ```python
  (edgePitches[['pitcher_name', 'pitch_name', 'game_date']].
   groupby(['pitcher_name', 'pitch_name']).
   count().
   groupby('pitcher_name').
   apply(lambda x: x / x.sum()).
   head(10))
  ```

  |              |                 | game_date |
  | -----------: | --------------: | --------: |
  | pitcher_name |      pitch_name |           |
  |       ë‹ˆí¼íŠ¸ | 2-Seam Fastball |  0.040000 |
  |              | 4-Seam Fastball |  0.720000 |
  |              |        Changeup |  0.120000 |
  |              |       Curveball |  0.120000 |
  |   ë‹¤ì´ì•„ëª¬ë“œ | 2-Seam Fastball |  0.033654 |
  |              | 4-Seam Fastball |  0.745192 |
  |              |        Changeup |  0.048077 |
  |              |       Curveball |  0.173077 |
  |     ë“€ë¸Œë¡ íŠ¸ | 2-Seam Fastball |  0.209424 |
  |              | 4-Seam Fastball |  0.507853 |

* `count` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ íˆ¬ìˆ˜ë³„ êµ¬ì¢… ê°œìˆ˜ë¥¼ ì‚°ì¶œí•œ í›„ `groupby`ë¥¼ `pitcher_name`ì— ëŒ€í•´ í•œ ë²ˆ ë” ì‹¤ì‹œ

* ê·¸ëŸ¬ê³  ë‚˜ì„œ `apply` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ êµ¬ì¢…ë³„ íˆ¬êµ¬ ê°œìˆ˜ë¥¼ ê°€ì¥ìë¦¬ì— ìˆëŠ” ì „ì²´ íˆ¬êµ¬ì˜ í•©ìœ¼ë¡œ ë‚˜ëˆ”ìœ¼ë¡œì¨ ìƒëŒ€ì ì¸ ë¹„ìœ¨ì„ êµ¬í•¨

* ì˜ˆë¥¼ ë“¤ì–´ ë‹ˆí¼íŠ¸ëŠ” 2-Seam Fastballì„ 1 ë²ˆ ë˜ì¡Œê³  ê°€ì¥ìë¦¬ì—ëŠ” ì´ 25ê°œì˜ íˆ¬êµ¬ê°€ ê¸°ë¡

  *  ë”°ë¼ì„œ ì „ì²´ íˆ¬êµ¬ì— ëŒ€í•œ 2-Seam Fastballì˜ ë¹„ì¤‘ì€ 1/25ì„ ê³„ì‚°í•´ 0.04ê°€ ì‚°ì¶œ 

* ì‚°ì¶œëœ ë¹„ìœ¨ì—ì„œ 10% ì´ìƒì¸ êµ¬ì¢…ë§Œ ì¶”ì¶œí•˜ê³ ì í•¨

  * ì™œëƒí•˜ë©´ ë˜ì§„ ë¹„ì¤‘ì´ 10% ì´í•˜ì¸ êµ¬ì¢…ì€ ìš°ì—°ìœ¼ë¡œ ì œêµ¬ ê°€ ì¢‹ê²Œ ì‚°ì¶œëœ êµ¬ì¢…ì´ë¼ê³  ì •ì˜ë‚´ë ¸ê¸° ë•Œë¬¸

  > 10% ì´ìƒì¸ êµ¬ì¢…ë§Œ ì¶”ì¶œ

  ```python
  (edgePitches[['pitcher_name', 'pitch_name', 'game_date']].
   groupby(['pitcher_name', 'pitch_name']).
   count().
   groupby('pitcher_name').
   apply(lambda x: x / x.sum()).
   query('game_date >= 0.1').
   head(10))
  ```

  |              |                 | game_date |
  | -----------: | --------------: | --------: |
  | pitcher_name |      pitch_name |           |
  |       ë‹ˆí¼íŠ¸ | 4-Seam Fastball |  0.720000 |
  |              |        Changeup |  0.120000 |
  |              |       Curveball |  0.120000 |
  |   ë‹¤ì´ì•„ëª¬ë“œ | 4-Seam Fastball |  0.745192 |
  |              |       Curveball |  0.173077 |
  |     ë“€ë¸Œë¡ íŠ¸ | 2-Seam Fastball |  0.209424 |
  |              | 4-Seam Fastball |  0.507853 |
  |              |        Changeup |  0.107330 |
  |              |       Curveball |  0.102094 |
  |       ë ˆë‚˜ë„ | 4-Seam Fastball |  0.631579 |

* `query` í•¨ìˆ˜ë¥¼ ì ìš©í•´ì„œ `game_date` ì¹¼ëŸ¼ ê¸°ì¤€ 0.1 ì´ìƒë§Œ ì¶”ì¶œ

* í˜„ì¬ `game_date` ì¹¼ëŸ¼ì—ëŠ” êµ¬ì¢…ë³„ íˆ¬êµ¬ ë¹„ì¤‘ì´ ë“¤ì–´ ìˆê¸° ë•Œë¬¸

* ìœ„ì™€ ê°™ì´ ì¶”ì¶œëœ ë°ì´í„°ì— ëŒ€í•´ íˆ¬ìˆ˜ë³„ í–‰ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ë©´ íˆ¬ìˆ˜ë³„ ì œêµ¬ë ¥ì„ í‰ê°€í•˜ëŠ” ì§€í‘œê°€ ì™„ì„±ë¨

  > íˆ¬ìˆ˜ë³„ ì œêµ¬ë ¥ì„ í‰ê°€í•˜ëŠ” ì§€í‘œ ì™„ì„±

  ```python
  coordEdge = (edgePitches[['pitcher_name', 'pitch_name', 'game_date']].
               groupby(['pitcher_name', 'pitch_name']).
               count().
               groupby('pitcher_name').
               apply(lambda x : x / x.sum()).
               query('game_date >= 0.1').
               groupby('pitcher_name').
               count())
  
  coordEdge = coordEdge.reset_index().rename(columns={'game_date':'num_pitches'})
  
  coordEdge.head()
  ```

  |      | pitcher_name | num_pitches |
  | ---: | -----------: | ----------: |
  |    0 |       ë‹ˆí¼íŠ¸ |           3 |
  |    1 |   ë‹¤ì´ì•„ëª¬ë“œ |           2 |
  |    2 |     ë“€ë¸Œë¡ íŠ¸ |           4 |
  |    3 |       ë ˆë‚˜ë„ |           2 |
  |    4 |         ë ˆì˜¨ |           2 |

* íˆ¬êµ¬ ë¹„ì¤‘ì´ 0.1 ì´ìƒì¸ êµ¬ì¢…ë“¤ì„ ì¶”ì¶œí•œ ë°ì´í„°ì…‹ì—ì„œ `pitcher_name` ê¸°ì¤€ìœ¼ë¡œ `groupby`ë¥¼ í•œ í›„ `count` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ í–‰ì˜ ê°œìˆ˜ë¥¼ ì‚°ì¶œ

* ì´ë ‡ê²Œ ì‚°ì¶œëœ ê²°ê³¼ë¬¼ì„ `coordEdge`ë¼ëŠ” ë³€ìˆ˜ì— ì €ì¥í•œ í›„ `index`ê°’ì„ ì´ˆê¸°í™”í•˜ê³  ì¹¼ëŸ¼ëª…ì„ `game_date`ì—ì„œ `num_pitches`ë¡œ ë°”ê¿ˆ

* ìµœì¢… ê²°ê³¼ë¬¼ì„ `coordEdge.head()`ë¥¼ í†µí•´ í™•ì¸

* ì •ì˜í•œ ì¡°ê±´ì— ë”°ë¼ ë‹ˆí¼íŠ¸ê°€ ì œì–´ ê°€ëŠ¥í•œ êµ¬ì¢…ì€ 3ê°œê³  ë‹¤ì´ì•„ëª¬ë“œëŠ” 2ê°œ

  * ì´ëŠ” íˆ¬ìˆ˜ë³„ ì œêµ¬ë ¥ì„ í‰ê°€í•˜ëŠ” ì§€í‘œì´ë©°, ë†’ì„ìˆ˜ë¡ ì¢‹ì€ ìˆ˜ì¹˜

* ì‚°ì¶œí•œ ì œêµ¬ë ¥ì— ë”°ë¼ KBOì—ì„œì˜ í‰ê· ìì±…ì ì´ ì–´ë–»ê²Œ ë³€í•˜ëŠ” ì§€ í™•ì¸

  > ì œêµ¬ë ¥ê³¼ KBOì—ì„œì˜ í‰ê· ìì±…ì 

  ```python
  Elite_11_18 = Elite_11_18.reset_index()
  
  Elite_11_18 = Elite_11_18.merge(coordEdge, on='pitcher_name')
  
  Elite_11_18.boxplot('ERA', 'num_pitches')
  
  # ì‹¤í–‰ ê²°ê³¼
  <AxesSubplot:title={'center':'ERA'}, xlabel='num_pitches'>
  ```

  ![](/images/2022-04-15-dacon-chap05-2nd/5_4_1-5.png)
  {: .text-center}

* `Elite_11_18`ì—ëŠ” ë°ì´í„° ì „ì²˜ë¦¬ íŒŒíŠ¸ì—ì„œ ì¶”ì¶œí•œ íˆ¬ìˆ˜ë“¤ì˜ ì •ë³´ê°€ ì €ì¥ë¼ ìˆìŒ. 

  * í•´ë‹¹ íˆ¬ìˆ˜ë“¤ì€ êµ­ë‚´ ë¦¬ê·¸ì—ì„œ ìœ íš¨í•œ ìš°ìˆ˜ ì„±ì ì„ ë³´ì—¬ì¤€ íˆ¬ìˆ˜ë“¤

* ì¸ë±ìŠ¤ ê°’ì´ í˜„ì¬ ì •ëˆë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ `reset_index`í•¨ìˆ˜ë¥¼ í†µí•´ ì •ë¦¬í•´ì¤Œ

* ê·¸ í›„ í•´ë‹¹ íˆ¬ìˆ˜ë“¤ì— ëŒ€í•œ ì œêµ¬ë ¥ ì§€í‘œë¥¼ `merge` í•¨ìˆ˜ë¥¼ í†µí•´ ì¶”ê°€í•¨

* ê·¸ëŸ¬ê³  ë‚˜ì„œ `boxplot` í•¨ìˆ˜ë¥¼ í†µí•´ ìƒìê·¸ë¦¼ìœ¼ë¡œ ì‹œê°í™”í•¨

* ì¶œë ¥ë¬¼ì„ í™•ì¸í•˜ë©´ ì œêµ¬ë ¥ì´ ë†’ì•„ì§ˆìˆ˜ë¡ í‰ê· ìì±…ì ì´ ê°ì†Œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ

* ì´ëŸ¬í•œ ê²½í–¥ì´ í†µê³„ì ìœ¼ë¡œë„ ìœ ì˜í•œì§€ ê²€ì¦í•˜ê¸° ìœ„í•´ **ì„ í˜•íšŒê·€ë¶„ì„** ì„ ì‹¤ì‹œí•©ë‹ˆë‹¤.

  > ì„ í˜•íšŒê·€ë¶„ì„

  ```python
  import statsmodels.api as sm
  
  y = Elite_11_18.ERA.values
  X = sm.add_constant(Elite_11_18.num_pitches.values)
  
  model = sm.OLS(y, X)
  
  result = model.fit()
  
  result.summary()
  ```

  > OLS Regression Results

  |    Dep. Variable: |                y | R-squared:          | 0.268   |
  | ----------------: | ---------------: | ------------------- | ------- |
  |            Model: |              OLS | Adj. R-squared:     | 0.222   |
  |           Method: |    Least Squares | F-statistic:        | 5.861   |
  |             Date: | Fri, 15 Apr 2022 | Prob (F-statistic): | 0.0277  |
  |             Time: |         08:16:12 | Log-Likelihood:     | -14.248 |
  | No. Observations: |               18 | AIC:                | 32.50   |
  |     Df Residuals: |               16 | BIC:                | 34.28   |
  |         Df Model: |                1 |                     |         |
  |  Covariance Type: |        nonrobust |                     |         |

  |       |    coef | std err |      t | P>\|t\| | [0.025 | 0.975] |
  | ----: | ------: | ------: | -----: | ------: | -----: | ------ |
  | const |  4.7731 |   0.414 | 11.543 |   0.000 |  3.896 | 5.650  |
  |    x1 | -0.3629 |   0.150 | -2.421 |   0.028 | -0.681 | -0.045 |

  |       Omnibus: |  0.141 | Durbin-Watson:    | 1.946 |
  | -------------: | -----: | ----------------- | ----- |
  | Prob(Omnibus): |  0.932 | Jarque-Bera (JB): | 0.346 |
  |          Skew: | -0.120 | Prob(JB):         | 0.841 |
  |      Kurtosis: |  2.365 | Cond. No.         | 9.56  |

* ì´ ë¶„ì„ì—ì„œ ì¢…ì†ë³€ìˆ˜ëŠ” KBO ì²« ì‹œì¦Œì—ì„œì˜ í‰ê· ìì±…ì ì´ë©° ë…ë¦½ë³€ìˆ˜ëŠ” íˆ¬ìˆ˜ì˜ ì œêµ¬ë ¥ì„
  * ë”°ë¼ì„œ `Elite_11_18` ë°ì´í„°ì—ì„œ ERA ì¹¼ëŸ¼ì˜ ê°’ë“¤ì„ y ë³€ìˆ˜ì— ì €ì¥í•˜ê³  `num_pitches` ì¹¼ëŸ¼ì˜ ê°’ë“¤ì„ X ë³€ìˆ˜ì— ì €ì¥
  * ë‹¨ìˆœ ì„ í˜•íšŒê·€ ëª¨ë¸ì€ í˜•íƒœë¡œ êµ¬ì„±ë¼ ìˆìœ¼ë¯€ë¡œ ìƒìˆ˜í•­ì„ ë”í•˜ê¸° ìœ„í•´ `add.constant` í•¨ìˆ˜ë¥¼ ì‚¬ìš©
  * ê·¸ëŸ¬ê³  ë‚˜ì„œ ì„ í˜•íšŒê·€ ëª¨ë¸ì„ OLS í•¨ìˆ˜ë¥¼ í†µ í•´ ì •ì˜í•˜ê³  fit í•¨ìˆ˜ë¥¼ í†µí•´ ëª¨ë¸ í›ˆë ¨ì„ ì§„í–‰
  * ë§ˆì§€ë§‰ìœ¼ë¡œ `summary` í•¨ìˆ˜ë¥¼ í†µí•´ ì„  í˜•íšŒê·€ë¶„ì„ ê²°ê³¼ ë¦¬í¬íŠ¸ë¥¼ ì¶œë ¥
* ë…ë¦½ë³€ìˆ˜ì¸ `x1`ì˜ ê³„ìˆ˜ê°€ -0.3629ë¡œ ê³„ì‚°ë¨
  * ì´ëŠ” ì œêµ¬ë ¥ ì§€í‘œê°€ 1 ìƒìŠ¹í•  ë•Œë§ˆë‹¤ KBOì—ì„œì˜ ERAê°€ í‰ê· ì ìœ¼ë¡œ 0.3629ë§Œí¼ ê°ì†Œí•œë‹¤ê³  í•´ì„ ê°€ëŠ¥
  * í•´ë‹¹ ê³„ìˆ˜ì˜ p-valueê°€ 0.028ìœ¼ë¡œ 0.05ë³´ë‹¤ ì‘ìœ¼ë¯€ë¡œ ìœ ì˜í•œ ê²°ê³¼ê°€ ë‚˜ì™”ë‹¤ê³  í•´ì„ ê°€ëŠ¥
  * ê³¼ê±° ë°ì´í„°ì— ëŒ€í•´ ì„ í˜•íšŒê·€ë¶„ì„ì„ í†µí•´ ì–»ì€ ìœ ì˜í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ 2019ë…„ ì™¸êµ­ì¸ íˆ¬ìˆ˜ë¥¼ ìŠ¤ì¹´ìš°íŒ…í•  ë•Œë„ ì œêµ¬ë ¥ì„ í‰ê°€í•´ ê·¸ ì ìˆ˜ê°€ ê°€ì¥ ë†’ì€ íˆ¬ìˆ˜ë¥¼ ìŠ¤ì¹´ìš°íŒ…í•˜ê³ ì í•¨

### 2. ì•„ì›ƒ í™•ë¥  ì¶”ì •í•˜ê¸°

* ì•ì„œ ì œêµ¬ë ¥ ì§€í‘œë¥¼ í™•ì¸í–ˆì§€ë§Œ ì œêµ¬ë ¥ì´ ë™ì ìœ¼ë¡œ ë‚˜ì˜¬ ìˆ˜ë„ìˆìŒ

* ëŒ€íšŒì˜ ëª©í‘œëŠ” ìŠ¤ì¹´ìš°íŒ…í•˜ê³ ì í•˜ëŠ” 2ëª…ì˜ íˆ¬ìˆ˜ë¥¼ ì œì‹œí•˜ëŠ” ê²ƒì¸ë°, ì œêµ¬ë ¥ ì ìˆ˜ê°€ ë™ì ì¸ ì„ ìˆ˜ê°€ 3ëª… ì´ìƒì´ ë‚˜ì˜¤ëŠ” ê²½ìš° ì¶”ê°€ ì„ ë°œ ê¸°ì¤€ì´ í•„ìš”

* í•´ë‹¹ ê¸°ì¤€ìœ¼ë¡œëŠ” `ì•„ì›ƒ í™•ë¥ ` ì„ ì‚¬ìš©

  * ì—¬ê¸°ì—ì„œ ì •ì˜í•˜ê³ ì í•˜ëŠ” `ì•„ì›ƒ í™•ë¥ `ì€ 1996ë…„ì— ë°œí‘œëœ "Modeling Pitcher Performance and the Distribution of Runs per Inning in Major League Baseball" ë…¼ë¬¸ì— ë‚˜ì˜¤ëŠ” ê°œë…ì„ ëœ»í•¨
  * ì•„ì›ƒ í™•ë¥ ì€ íˆ¬ìˆ˜ê°€ í•œ ì´ë‹ì— ìƒëŒ€í•˜ëŠ” íƒ€ìì˜ ìˆ˜ê°€ ë”°ë¥´ëŠ” ìŒì´í•­ ë¶„í¬ì—ì„œ ë‚˜ì˜¤ëŠ” ëª¨ìˆ˜ì„
  * ìŒì´í•­ ë¶„í¬ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì´í•­ë¶„í¬ë¥¼ ë¨¼ì € ì†Œê°œí•¨

* ì´í•­ë¶„í¬ëŠ” ë‘ ê°€ì§€ ë°°ë°˜ì‚¬ê±´ì´ ë‚˜ì˜¤ëŠ” ì‹±í™©ì—ì„œ në²ˆì˜ ì‹œí–‰ íšŸìˆ˜ ë‚´ì— íŠ¹ì • ì‚¬ê±´ì´ ì„±ê³µí•œ ê±´ ìˆ˜ë¥¼ ëª¨ë¸ë§í•  ë•Œ ì“°ëŠ” ë¶„í¬

  * ì˜ˆë¥¼ ë“¤ì–´, 3ë²ˆ ë™ì „ì„ ë˜ì¡Œì„ ë•Œ ë‚˜ì˜¤ëŠ” ì•ë©´ì˜ ìˆ˜ì˜ í™•ë¥  ê°’ì´ ê¶ê¸ˆí•  ë•Œ ì´í•­ë¶„í¬ë¥¼ ì‚¬ìš©
  * ì¦‰, ë™ì „ì„ ë˜ì§€ëŠ” ì‹œí–‰ íšŸìˆ˜ëŠ” ê³ ì •ë¼ ìˆê³ , ì•ë©´ì´ ë‚˜ì˜¤ëŠ” íŠ¹ì • ì‚¬ê±´ì˜ ì„±ê³µ íšŸìˆ˜ëŠ” ìœ ë™ì ì„
  * ê·¸ëŸ¬ë¯€ë¡œ íŠ¹ì • ì‚¬ê±´ì˜ ì„±ê³µ íšŸìˆ˜ê°€ í™•ë¥  ë³€ìˆ˜ê°€ ë¨

* ìŒì´í•­ ë¶„í¬ëŠ” ì´ê²ƒì˜ ì •ë°˜ëŒ€

  * íŠ¹ì • ì‚¬ê±´ì˜ ì„±ê³µ íšŸìˆ˜ê°€ ê³ ì •ë¼ìˆê³ , í•´ë‹¹ ì„±ê³µ íšŸìˆ˜ë¥¼ ë‹¬ì„±í•˜ê¸°ê¹Œì§€ ì‹œí–‰í•œ íšŸìˆ˜ê°€ í™•ë¥ ë³€ìˆ˜ì— ëŒ€ì‘
  * ì˜ˆë¥¼ ë“¤ì–´, 3ê°œì˜ ì•ë©´ì´ ë‚˜ì˜¤ê¸°ê¹Œì§€ ë™ì „ì„ ë˜ì§„ íšŸìˆ˜ë¥¼ ëª¨ë¸ë§í•  ë•Œ ìŒì´í•­ ë¶„í¬ë¥¼ ì‚¬ìš©

  > ì´í•­ ë¶„í¬ì™€ ìŒì´í•­ ë¶„í¬

  |                           ì´í•­ë¶„í¬                           |                          ìŒì´í•­ë¶„í¬                          |
  | :----------------------------------------------------------: | :----------------------------------------------------------: |
  |                          X~B(n, p)                           |                          X~NB(k, p)                          |
  | ë™ì „ ë˜ì§€ê¸°ì—ì„œ 3ë²ˆ ë™ì „ì„ ë˜ì¡Œì„ ë•Œ ë‚˜ì˜¨ ì•ë©´ì˜ ìˆ˜ = X ã€œB(3, 0.5)(0 â‰¤ X â‰¤ 3)<br />nï¼š ì‹œí–‰ íšŸìˆ˜ (ê³ ì •)<br />Xï¼šnë²ˆì˜ ì‹œí–‰ íšŸìˆ˜ ë‚´ì—ì„œ, í•´ë‹¹ì‚¬ê±´ì´ ë°œìƒí•œ ê±´ìˆ˜ | ë™ì „ ë˜ì§€ê¸°ì—ì„œ 3ë²ˆì˜ ì•ë©´ì´ ë‚˜ì˜¤ê¸° ìœ„í•´ì„œ ë™ì „ì„ ë˜ì§„ íšŸìˆ˜ = X~NB(3, 0.5) (3 â‰¤ X)<br />kï¼š ì„±ê³µ íšŸìˆ˜ (ê³ ì •)<br />Xï¼š í•´ë‹¹ ì‚¬ê±´ì´ kë²ˆ ë°œìƒí•˜ê¸°ê¹Œì§€ ì‹œí–‰í•œ íšŸìˆ˜ |

* ê·¸ë ‡ê¸°ì— ìŒì´í•­ ë¶„í¬ëŠ” íˆ¬ìˆ˜ì˜ í™œì•½ìƒì„ ëª¨ë¸ë§í•˜ê¸°ì— ì•„ì£¼ ì í•©í•œ ë¶„í¬

* íˆ¬ìˆ˜ëŠ” í•œ ì´ë‹ì—ì„œ 3ë²ˆì˜ ì•„ì›ƒì„ ì¡ê¸° ìœ„í•´ íƒ€ìë¥¼ ê³„ì† ìƒëŒ€í•˜ê²Œ ë¨

* ê·¸ëŸ¬ë¯€ë¡œ 3ê°œì˜ ì•„ì›ƒì„ ì¡ì„ ë•Œê¹Œì§€ ìƒëŒ€í•œ íƒ€ìì˜ ìˆ˜ê°€ í™•ë¥ ë³€ìˆ˜ Xì¸ ìŒì´í•­ ë¶„í¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ

  > kê°€ 3ì¸ ìŒì´í•­ ë¶„í¬ ì˜ˆì‹œ

  ![](/images/2022-04-15-dacon-chap05-2nd/5_4_1-6.png)
  {: .text-center}

* ì˜ˆë¥¼ ë“¤ì–´, Xê°€ 3ì´ë¼ëŠ” ë§ì€ ì—°ì†ì ìœ¼ë¡œ ì„¸ ëª…ì˜ íƒ€ìë¥¼ ì•„ì›ƒì‹œì¼°ë‹¤ëŠ” ëœ»ì´ê³ , Xê°€ 4ë¼ë©´ ì²˜ìŒ ë§ˆì£¼í•œ 3ëª…ì˜ íƒ€ì ì¤‘ 2ëª…ì„ ì•„ì›ƒì‹œí‚¤ê³ , 4ë²ˆì§¸ íƒ€ìë¥¼ ì•„ì›ƒì‹œì¼°ë‹¤ëŠ” ëœ»ì„

* ì—¬ê¸°ì„œ 3ê°œì˜ ì•„ì›ƒì€ í•œ ì´ë‹ì´ ëë‚˜ëŠ” ì‹œì ì„ ì˜ë¯¸í•˜ë¯€ë¡œ í•œ ì´ë‹ ëë‚  ë•Œê¹Œì§€ íˆ¬ìˆ˜ê°€ ìƒëŒ€í•œ íƒ€ìì˜ ìˆ˜ë¥¼ ëª¨ë¸ë§í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¶„í¬

* ì—¬ê¸°ì„œ ëª¨ìˆ˜ pëŠ” íˆ¬ìˆ˜ê°€ í•œ ëª…ì˜ íƒ€ìë¥¼ ì•„ì›ƒì‹œí‚¬ í™•ë¥ ì„ ëœ»í•¨

* ì´ í™•ë¥ ì„ ì¶”ì •í•˜ê¸° ìœ„í•´ì„œëŠ” í•œ ì´ë‹ì´ ëë‚  ë•Œê¹Œì§€ íˆ¬ìˆ˜ê°€ ìƒëŒ€í•œ íƒ€ìì˜ ìˆ˜ì— ëŒ€í•œ ë°ì´í„°ê°€ í•„ìš”í•¨

* í•´ë‹¹ ë°ì´í„°ëŠ” ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ê°€ê³µí•´ ë„ì¶œí•´ ë‚¼ ìˆ˜ ìˆìŒ

* íˆ¬ìˆ˜ê°€ ì´ë‹ë³„ë¡œ ìƒëŒ€í•œ íƒ€ìì˜ ìˆ˜ë¥¼ ë„ì¶œí•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŒ

  * ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì˜ `events` ì¹¼ëŸ¼ì—ëŠ” íƒ€ì„ë³„ ê²°ê³¼ê°€ ê¸°ë¡ë˜ì–´ ìˆìŒ
  * íƒ€ì„ë³„ ì˜¤ì§ í•˜ë‚˜ì˜ ê²°ê³¼ë§Œ ê¸°ë¡ë˜ë©° ë‚˜ë¨¸ì§€ì—ëŠ” ëª¨ë‘ ê²°ì¸¡ê°’ì´ ì…ë ¥ë¼ ìˆìŒ
  * ê·¸ëŸ¬ë¯€ë¡œ `events` ì¹¼ëŸ¼ì— ê²°ì¸¡ê°’ì´ í¬í•¨ëœ í–‰ì„ ì œê±°í•˜ë©´ íˆ¬ìˆ˜ë³„ë¡œ í•´ë‹¹ ê²½ê¸°ì— ìƒëŒ€í•œ ê³ ìœ  íƒ€ìë“¤ë§Œ ë‚¨ê²Œ ë¨
  * ì´ì–´ì§€ëŠ” ë‘ ì½”ë“œë¥¼ í†µ í•´ í•´ë‹¹ ê³¼ì •ì„ í™•ì¸í•´ ë´„
  * ìš°ì„ , ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì˜ `events` ì¹¼ëŸ¼ ê°’ì„ í™•ì¸

  > ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì˜ events ì¹¼ëŸ¼ ê°’

  ```python
  atKbo_11_18_StatCast[['batter', 'events', 'description']].head(10)
  ```

  |      |   batter |    events |         description |
  | ---: | -------: | --------: | ------------------: |
  |    0 | 425834.0 | field_out |       hit_into_play |
  |    1 | 150289.0 |  home_run | hit_into_play_score |
  |    2 | 150289.0 |       NaN |                foul |
  |    3 | 150289.0 |       NaN |        blocked_ball |
  |    4 | 150289.0 |       NaN |                ball |
  |    5 | 150289.0 |       NaN |            foul_tip |
  |    6 | 150289.0 |       NaN |                ball |
  |    7 | 430632.0 | field_out |       hit_into_play |
  |    8 | 430632.0 |       NaN |                ball |
  |    9 | 430632.0 |       NaN |                ball |

* ê²½ê¸° ì§„í–‰ì— ë”°ë¥¸ íˆ¬êµ¬ ê²°ê³¼ê°€ ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì—ëŠ” ì•„ë˜ì—ì„œ ìœ„ë¡œ ê¸°ë¡

* ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì•„ë˜ì—ì„œ ìœ„ ìˆœì„œë¡œ `events`ì— ê°’ì´ ê¸°ë¡ë  ë•Œë§ˆë‹¤ ë‹¤ìŒ í–‰ì˜ `batter` ê°’ì´ ë°”ë€ ê²ƒì„ í™•ì¸ ê°€ëŠ¥ 

* `events` ì¹¼ëŸ¼ì˜ ê²°ì¸¡ê°’ì„ ëª¨ë‘ ì œê±°í•˜ê³  ë¬¸ìì—´ë§Œ ë‚¨ê¹€

  > events ì¹¼ëŸ¼ì˜ ê²°ì¸¡ê°’ì„ ì œê±°

  ```python
  (atKbo_11_18_StatCast[['batter', 'events', 'description']].
   query('events.notnull()', engine='python').
   head(10))
  ```

  |      |   batter |    events | description          |
  | ---: | -------: | --------: | -------------------- |
  |    0 | 425834.0 | field_out | hit_into_play        |
  |    1 | 150289.0 |  home_run | hit_into_play_score  |
  |    7 | 430632.0 | field_out | hit_into_play        |
  |   10 | 446481.0 |    single | hit_into_play_no_out |
  |   12 | 446334.0 | field_out | hit_into_play        |
  |   15 | 116338.0 | field_out | hit_into_play        |
  |   19 | 110029.0 | field_out | hit_into_play        |
  |   25 | 435062.0 | field_out | hit_into_play        |
  |   29 | 488721.0 |  home_run | hit_into_play_score  |
  |   31 | 430948.0 | field_out | hit_into_play        |

* `events` ì¹¼ëŸ¼ì— ê²°ì¸¡ê°’ì´ ìˆëŠ” í–‰ì„ ëª¨ë‘ ì œê±°í•´ ê³ ìœ  `batter`ì˜ ì •ë³´ë§Œ ë‚¨ìŒ

* í•´ë‹¹ ê³¼ì •ì„ í†µí•´ íˆ¬ìˆ˜ê°€ í•´ë‹¹ ê²½ê¸°ì— ìƒëŒ€í•œ ê³ ìœ  íƒ€ì ìˆ˜ë¥¼ ì•Œ ìˆ˜ ìˆìŒ.

* ì´ë‹ë³„ ìƒëŒ€ íƒ€ì ìˆ˜ë¥¼ ì‚°ì¶œí•˜ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ë°ì´í„°ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìˆœíšŒí•˜ë©´ì„œ ì§ì ‘ ì¹´ìš´íŒ…í•´ì•¼ í•¨

  > ì´ë‹ë³„ ìƒëŒ€ íƒ€ì ìˆ˜ë¥¼ ì‚°ì¶œ

  ```python
  def recordInning(key, dic):    
      if dic.get(key) == None :
          dic[key] = 1
      else :
          dic[key] += 1
      
      return dic
      
  
  def getInningResult(df):
      batterCount = 0
      batterCountTemp = 0
      outs = ['out', 'out', 'out']
      inningDict = {}
      
      for idx in range(len(df)-1, -1, -1):
          batterCount += 1
          
          if 'out' in df.events.iloc[idx]:
              outs.pop()
          
          # outì´ 3ë²ˆ ë‚˜ì˜¤ë©´ ê¸°ë¡
          if len(outs) == 0:
              _key = f'I_{batterCount - batterCountTemp}'
              inningDict = recordInning(_key, inningDict)
              batterCountTemp = batterCount
              
              if idx != 0 :
                  outs = ['out', 'out', 'out']
              
      if len(outs) != 0:
          _key = f'I_{batterCount - batterCountTemp + len(outs)}'
          inningDict = recordInning(_key, inningDict)
      
      return pd.DataFrame(data = dict(sorted(inningDict.items())), index = [0])
  ```

* í•´ë‹¹ ì•Œê³ ë¦¬ì¦˜ì€ ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì•„ë˜ì—ì„œ ìœ„ë¡œ ìˆœíšŒí•  ë•Œë§ˆë‹¤ `batterCount`ë¥¼ ì¦ê°€ì‹œí‚´

  * ê·¸ë¦¬ê³  `events` ì¹¼ëŸ¼ì— ê¸°ë¡ëœ ë¬¸ìì—´ ê°’ ì¤‘ `out`ì´ í¬í•¨ëœ `events`ë¥¼ ë§Œë‚˜ë©´ `outs` ë¦¬ ìŠ¤íŠ¸ì—ì„œ `out`ë¬¸ìì—´ì„ í•˜ë‚˜ ì œê±°
  * `outs`ë¦¬ìŠ¤íŠ¸ê°€ ë¹ˆ ìƒíƒœê°€ ë˜ë©´ 3ë²ˆì˜ `out`ì´ ë‚˜ì˜¨ ê²ƒì„
  * ì´ë•Œ, ìƒëŒ€í•œ íƒ€ì ìˆ˜ê°€ Nì´ë¼ê³  í•˜ë©´ I_N í‚¤ ê°’ì— 1ì„ ì¦ê°€ì‹œí‚´
  * ë§ˆì§€ë§‰ í–‰ì¸ idxê°’ 0ì— ë„ë‹¬í•˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì€ ì•„ì§ í•´ë‹¹ ê²½ê¸°ì˜ íˆ¬êµ¬ ê¸°ë¡ì´ ë‚¨ì•„ ìˆë‹¤ëŠ” ê²ƒì´ë¯€ë¡œ `outs` ë¦¬ìŠ¤íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ê³  ìˆœíšŒ ì‘ì—…ì„ ë°˜ë³µí•¨

* íˆ¬ìˆ˜ê°€ ì¤‘ë„ êµì²´ë  ê²½ìš° outs ë¦¬ìŠ¤íŠ¸ì—ëŠ” out ë¬¸ìì—´ì´ ë‚¨ì•„ ìˆì„ ê²ƒì„

* í•´ë‹¹ ì´ë‹ì„ ë§ˆ ë¬´ë¦¬í•˜ì§€ ëª»í–ˆìœ¼ë¯€ë¡œ êµì²´ë˜ê¸° ì „ê¹Œì§€ ìƒëŒ€í•œ íƒ€ì ìˆ˜ì— ë‚¨ì€ ì•„ì›ƒ ì¹´ìš´íŠ¸ ê°œìˆ˜ë¥¼ ë”í•´ ìƒëŒ€ í•œ íƒ€ì ìˆ˜ë¥¼ ì¶”ì •

  > ì´ë‹ë³„ ìƒëŒ€í•œ íƒ€ì ì˜ˆì‹œ

  ![](/images/2022-04-15-dacon-chap05-2nd/5_4_2-1.png)
  {: .text-center}

* ìœ„ì˜ ê·¸ë¦¼ì„ í†µí•´ ì˜ˆë¥¼ ë“¤ì–´ë³´ë©´, ì²« ë²ˆì§¸ ì´ë‹ì—ì„œ 3ëª… ì˜ íƒ€ìë¥¼ ìƒëŒ€í–ˆìœ¼ë¯€ë¡œ `I_3`ì— ê¸°ë¡í•˜ê³  ë‘ ë²ˆì§¸ ì´ë‹ì—ì„œ í•œ ëª…ì„ ì•„ì›ƒì‹œí‚¤ê³  ë‘ ëª…ì„ ì¶œë£¨ ì‹œì¼œ ì¤‘ë„ êµì²´ë¥¼ ë‹¹í–ˆë‹¤ë©´, `outs` ë¦¬ìŠ¤íŠ¸ì—ëŠ” 2ê°œì˜ `out`ì´ ë‚¨ê²Œ ë¨

* ê·¸ë˜ì„œ ë‘ ë²ˆì§¸ ì´ë‹ ì€ ì´ 5ëª…ì„ ìƒëŒ€í–ˆë‹¤ê³  ì¶”ì •í•˜ê³  `I_5`ì— ê¸°ë¡

  > í•¨ìˆ˜ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ í™•ì¸

  ```python
  MLB_11_18_InningSummary = (atKbo_11_18_StatCast.query('events.notnull()',
                                                        engine='python').
                             groupby(['pitcher_name', 'game_date']).
                             apply(getInningResult))
  
  MLB_11_18_InningSummary.head()
  ```

  |              |            |      |  I_6 |  I_7 |  I_4 |  I_5 |  I_8 |  I_3 | I_12 | I_10 |  I_9 | I_11 | I_14 | I_13 | I_17 | I_16 |
  | -----------: | ---------: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ---: |
  | pitcher_name |  game_date |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |
  |       ë‹ˆí¼íŠ¸ | 2010-06-06 |    0 |  2.0 |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |
  |   2010-06-09 |          0 |  NaN |  1.0 |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |      |
  |   2010-06-17 |          0 |  NaN |  NaN |  1.0 |  1.0 |  1.0 |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |      |
  |   2010-06-23 |          0 |  1.0 |  1.0 |  1.0 |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |      |
  |   2010-06-30 |          0 |  1.0 |  NaN |  1.0 |  NaN |  NaN |  1.0 |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |  NaN |      |

* `getlnningResult` í•¨ìˆ˜ë¥¼ ì ìš©í•˜ê¸° ì „ì— `events` ì¹¼ëŸ¼ì— ê²°ì¸¡ê°’ì´ ìˆëŠ” ê²½ìš°ë¥¼ ë¨¼ì € ì œê±°

  *  `pitcher_name`,  `game_date` ê¸°ì¤€ìœ¼ë¡œ ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ë¥¼ `groupby` í•œ í›„ `getlnningResult` í•¨ìˆ˜ë¥¼ ì ìš©
  * íˆ¬ìˆ˜ì˜ ê²½ê¸°ë³„ ì´ë‹ ê²°ê³¼ê°€ ì‚°ì¶œë¼ ì¤„ë ¥ë¨
  * ì˜ˆë¥¼ ë“¤ì–´ ë‹ˆí¼íŠ¸ëŠ” 2010ë…„ 6ì›” 6ì¼ ê²½ê¸°ì—ì„œ 2ê°œì˜ ì´ë‹ ë™ì•ˆ ê°ê° 6ëª…ì˜ íƒ€ìë¥¼ ìƒëŒ€ í–ˆìœ¼ë©° 6ì›” 9ì¼ ê²½ê¸°ì—ì„œëŠ” í•˜ë‚˜ì˜ ì´ë‹ ë™ì•ˆ 7ëª…ì˜ íƒ€ìë¥¼ ìƒëŒ€í–ˆìŒì„ ì•Œ ìˆ˜ ìˆìŒ

* í•´ë‹¹ ê²°ê³¼ë¬¼ì„ `pitcher_name` ê¸°ì¤€ìœ¼ë¡œ `groupby`ë¥¼ ì‹¤ì‹œí•œ í›„ ì¹¼ëŸ¼ë³„ í•©ì„ êµ¬í•˜ë©´ íˆ¬ìˆ˜ë³„ MLBì—ì„œì˜ ëª¨ë“  ê²½ê¸° ê¸°ë¡ì´ í•©ì‚°ë¨

  > íˆ¬ìˆ˜ë³„ MLBì—ì„œì˜ ëª¨ë“  ê²½ê¸° ê°€ë¡ í•©ì‚°

  ```python
  MLB_11_18_InningSummary = (MLB_11_18_InningSummary.
                             groupby('pitcher_name').
                             sum()[sorted(MLB_11_18_InningSummary.columns)])
  
  MLB_11_18_InningSummary.head()
  ```

  |              | I_10 | I_11 | I_12 | I_13 | I_14 | I_16 | I_17 |   I_3 |   I_4 |  I_5 |  I_6 |  I_7 |  I_8 |  I_9 |
  | -----------: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ----: | ----: | ---: | ---: | ---: | ---: | ---: |
  | pitcher_name |      |      |      |      |      |      |      |       |       |      |      |      |      |      |
  |       ë‹ˆí¼íŠ¸ |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |   8.0 |  14.0 |  2.0 |  6.0 |  3.0 |  1.0 |  0.0 |
  |   ë‹¤ì´ì•„ëª¬ë“œ |  6.0 |  1.0 |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 | 105.0 |  65.0 | 60.0 | 33.0 | 25.0 | 22.0 |  6.0 |
  |     ë“€ë¸Œë¡ íŠ¸ |  9.0 |  1.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 | 146.0 | 150.0 | 79.0 | 63.0 | 29.0 | 26.0 | 14.0 |
  |       ë ˆë‚˜ë„ |  0.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  26.0 |  25.0 | 15.0 |  9.0 | 10.0 |  3.0 |  1.0 |
  |         ë ˆì˜¨ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   7.0 |   6.0 |  6.0 |  4.0 |  3.0 |  1.0 |  0.0 |

* `groupby` í•¨ìˆ˜ë¥¼ í†µí•´ íˆ¬ìˆ˜ë³„ë¡œ ë¬¶ì–´ì¤€ í›„ `sum` í•¨ìˆ˜ë¥¼ í†µí•´ ì¹¼ëŸ¼ë³„ í•©ì„ êµ¬í•¨

* ë§ˆì§€ë§‰ìœ¼ ë¡œ ì¹¼ëŸ¼ ìˆœì„œë¥¼ ì •ë ¬í•´ ì¶œë ¥í•˜ë©´ ìœ„ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜´

* ê²°ê³¼ë¥¼ í•´ì„í•˜ìë©´, ë‹ˆí¼íŠ¸ëŠ” MLBì—ì„œ 3ëª…ì˜ íƒ€ìë¥¼ ìƒëŒ€í•œ ì´ë‹ì„ 8ë²ˆ ê²ªì—ˆê³ , 4ëª…ì˜ íƒ€ìë¥¼ ìƒëŒ€í•œ ì´ë‹ì„ 14ë²ˆ ê²ªì—ˆìœ¼ë©°, 5ëª…ì˜ íƒ€ìë¥¼ ìƒëŒ€í•œ ì´ë‹ì„ 2ë²ˆ ê²ªì€ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ

* ë‹¤ìŒìœ¼ë¡œ, ì „ì²´ íˆ¬ìˆ˜ ì¤‘ `Elite_11_18`ì— ê¸°ë¡ëœ íˆ¬ìˆ˜ë“¤ì— ëŒ€í•œ ì •ë³´ë§Œ ì¶”ì¶œí•´ ë´„

  >  Elite_11_18ì— ê¸°ë¡ëœ íˆ¬ìˆ˜ë“¤ì— ëŒ€í•œ ì •ë³´ë§Œ ì¶”ì¶œ

  ```python
  MLB_11_18_InningSummary = MLB_11_18_InningSummary.reset_index()
  
  Elite_11_18_InningSummary = (MLB_11_18_InningSummary.
                               query('pitcher_name in @Elite_11_18.pitcher_name').
                               reset_index(drop = True))
  
  Elite_11_18_InningSummary
  ```

  |      | pitcher_name | I_10 | I_11 | I_12 | I_13 | I_14 | I_16 | I_17 |   I_3 |  I_4 |  I_5 |  I_6 |  I_7 |  I_8 |  I_9 |
  | ---: | -----------: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ----: | ---: | ---: | ---: | ---: | ---: | ---: |
  |    0 |       ë‹ˆí¼íŠ¸ |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |   8.0 | 14.0 |  2.0 |  6.0 |  3.0 |  1.0 |  0.0 |
  |    1 |   ë‹¤ì´ì•„ëª¬ë“œ |  6.0 |  1.0 |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 | 105.0 | 65.0 | 60.0 | 33.0 | 25.0 | 22.0 |  6.0 |
  |    2 |     ë ˆì´ì˜ˆìŠ¤ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  34.0 | 43.0 | 24.0 | 17.0 | 10.0 |  9.0 |  5.0 |
  |    3 |       ë ˆì¼ë¦¬ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  11.0 | 12.0 |  6.0 |  6.0 |  1.0 |  3.0 |  2.0 |
  |    4 |     ë¦°ë“œë¸”ëŸ¼ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  54.0 | 41.0 | 35.0 | 15.0 |  9.0 |  2.0 |  1.0 |
  |    5 |       ë³´ìš°ë´ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  37.0 | 49.0 | 12.0 | 21.0 |  6.0 |  2.0 |  1.0 |
  |    6 |         ìƒ˜ìŠ¨ |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  23.0 | 21.0 | 13.0 | 20.0 |  8.0 |  5.0 |  2.0 |
  |    7 |         ì„¸ë“  |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  24.0 | 13.0 | 11.0 |  6.0 |  4.0 |  3.0 |  1.0 |
  |    8 |         ì†Œì‚¬ |  1.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  17.0 |  5.0 | 11.0 | 11.0 |  2.0 |  2.0 |  0.0 |
  |    9 |         ì›¨ë²„ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   4.0 |  4.0 |  3.0 |  4.0 |  2.0 |  2.0 |  0.0 |
  |   10 |         ìœŒìŠ¨ |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  42.0 | 38.0 | 24.0 | 22.0 |  9.0 |  6.0 |  4.0 |
  |   11 |       íƒˆë³´íŠ¸ |  1.0 |  1.0 |  3.0 |  1.0 |  0.0 |  0.0 |  0.0 |  30.0 | 39.0 | 28.0 | 24.0 |  9.0 |  7.0 |  6.0 |
  |   12 |         íŒ»ë”˜ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  1.0 |  0.0 |  17.0 | 16.0 | 10.0 | 10.0 |  9.0 |  1.0 |  1.0 |
  |   13 |       í”¼ê°€ë¡œ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  31.0 | 22.0 | 28.0 | 12.0 |  5.0 |  3.0 |  1.0 |
  |   14 |     í”¼ì–´ë°´ë“œ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   2.0 |  4.0 |  2.0 |  0.0 |  1.0 |  1.0 |  0.0 |
  |   15 |         í•´ì»¤ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   3.0 |  2.0 |  6.0 |  2.0 |  1.0 |  1.0 |  0.0 |
  |   16 |         í—¥í„° |  6.0 |  4.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 | 123.0 | 96.0 | 75.0 | 44.0 | 33.0 |  9.0 |  7.0 |
  |   17 |     í›„ë­ì½”í”„ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   0.0 |  0.0 |  1.0 |  1.0 |  0.0 |  0.0 |  0.0 |

* ì´ 18ëª… íˆ¬ìˆ˜ì˜ ì •ë³´ê°€ ì¶”ì¶œë¨

* ì´ì œ í•´ë‹¹ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ íˆ¬ìˆ˜ë³„ ì•„ì›ƒ í™•ë¥ ì„ ì‚°ì¶œ

* ì´ë‹ë³„ ìƒëŒ€í•œ íƒ€ì ìˆ˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•„ì›ƒ í™•ë¥ ì„ ì¶”ì •í•˜ëŠ” ë°©ë²•ì€ ì•ì„œ ì–¸ê¸‰í•œ ë…¼ë¬¸ì— ë‚˜ì™€ ìˆìœ¼ë¯€ë¡œ í•´ë‹¹ ë…¼ë¬¸ì— ë‚˜ì˜¨ ê³µì‹ì„ êµ¬í˜„

  >  íˆ¬ìˆ˜ë³„ ì•„ì›ƒ í™•ë¥ ì„ ì‚°ì¶œí•˜ëŠ” í•¨ìˆ˜

  ```python
  def makeC1(df):
      '''
      Parameters:
      -----------
      df: InningSummary
      
      Returns:
      --------
      pd.Series
          ë…¼ë¬¸ì—ì„œ ì •ì˜í•œ C1 ê°’
      '''
      return df.sum(axis = 1)
  
  def makeC2(df):
      '''
      Parameters:
      -----------
      df: InningSummary
      
      Returns:
      --------
      pd.Series
          ë…¼ë¬¸ì—ì„œ ì •ì˜í•œ C2 ê°’
      '''
      return 3*(df['I_3'] + df['I_4'])
  
  def makeC3(df):
      '''
      Parameters:
      -----------
      df: InningSummary
      
      Returns:
      --------
      pd.Series
          ë…¼ë¬¸ì—ì„œ ì •ì˜í•œ C3 ê°’
      '''
      output = 0
      for N in range(5,18):
          try:
              output += (N-3)*df[f'I_{N}']
          except:
              continue
      return output
  
  def makeDelta(df):
      '''
      Parameters:
      -----------
      df: InningSummary with C1, C2, C3
      
      Returns:
      --------
      pd.Series
          ë…¼ë¬¸ì—ì„œ ì •ì˜í•œ Delta ê°’
      '''
      Delta = ((-df['C1'] + df['C2'] + 2*df['C3']) + 
               ((df['C1'] - df['C2'] - 2*df['C3']).pow(2) + 
                4*df['C3']*(3*df['C1'] + df['C2'] + 3*df['C3'])).pow(0.5)) / \
      (2*(3*df['C1'] + df['C2'] + 3*df['C3']))
      return Delta
  
  def makeOutProb(df):
      '''
      Parameters:
      -----------
      df: InningSummary
      
      Returns:
      --------
      pd.DataFrame
          InningSummary with C1, C2, C3, Delta, outProb
      '''
      df['C1']=makeC1(df)
      df['C2']=makeC2(df)
      df['C3']=makeC3(df)
  
      df['Delta'] = makeDelta(df)
      df['outProb'] = 1 - df['Delta']
      
      return df
  ```

* `makeOutProb` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ì›ƒ í™•ë¥ ì´ ì¶”ì •ë˜ë¯€ë¡œ ì•„ì›ƒ í™•ë¥ ì„ ì‚°ì¶œ

  ```python
  Elite_11_18_InningSummary = makeOutProb(Elite_11_18_InningSummary)
  Elite_11_18_InningSummary.sort_values('outProb', ascending = False)
  ```

  |      | pitcher_name | I_10 | I_11 | I_12 | I_13 | I_14 | I_16 | I_17 |   I_3 |  I_4 |  I_5 |  I_6 |  I_7 |  I_8 |  I_9 |    C1 |    C2 |    C3 |    Delta | outProb  |
  | ---: | -----------: | ---: | ---: | ---: | ---: | ---: | ---: | ---: | ----: | ---: | ---: | ---: | ---: | ---: | ---: | ----: | ----: | ----: | -------: | -------- |
  |    5 |       ë³´ìš°ë´ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  37.0 | 49.0 | 12.0 | 21.0 |  6.0 |  2.0 |  1.0 | 128.0 | 258.0 | 127.0 | 0.586895 | 0.413105 |
  |    4 |     ë¦°ë“œë¸”ëŸ¼ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  54.0 | 41.0 | 35.0 | 15.0 |  9.0 |  2.0 |  1.0 | 157.0 | 285.0 | 167.0 | 0.591972 | 0.408028 |
  |    7 |         ì„¸ë“  |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  24.0 | 13.0 | 11.0 |  6.0 |  4.0 |  3.0 |  1.0 |  62.0 | 111.0 |  77.0 | 0.619771 | 0.380229 |
  |   13 |       í”¼ê°€ë¡œ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  31.0 | 22.0 | 28.0 | 12.0 |  5.0 |  3.0 |  1.0 | 102.0 | 159.0 | 133.0 | 0.621519 | 0.378481 |
  |   14 |     í”¼ì–´ë°´ë“œ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   2.0 |  4.0 |  2.0 |  0.0 |  1.0 |  1.0 |  0.0 |  10.0 |  18.0 |  13.0 | 0.628539 | 0.371461 |
  |    0 |       ë‹ˆí¼íŠ¸ |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |   8.0 | 14.0 |  2.0 |  6.0 |  3.0 |  1.0 |  0.0 |  35.0 |  66.0 |  48.0 | 0.640926 | 0.359074 |
  |   16 |         í—¥í„° |  6.0 |  4.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 | 123.0 | 96.0 | 75.0 | 44.0 | 33.0 |  9.0 |  7.0 | 397.0 | 657.0 | 575.0 | 0.644372 | 0.355628 |
  |   10 |         ìœŒìŠ¨ |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  42.0 | 38.0 | 24.0 | 22.0 |  9.0 |  6.0 |  4.0 | 146.0 | 240.0 | 213.0 | 0.645420 | 0.354580 |
  |    3 |       ë ˆì¼ë¦¬ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  11.0 | 12.0 |  6.0 |  6.0 |  1.0 |  3.0 |  2.0 |  41.0 |  69.0 |  61.0 | 0.650185 | 0.349815 |
  |    2 |     ë ˆì´ì˜ˆìŠ¤ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  34.0 | 43.0 | 24.0 | 17.0 | 10.0 |  9.0 |  5.0 | 142.0 | 231.0 | 214.0 | 0.651042 | 0.348958 |
  |    1 |   ë‹¤ì´ì•„ëª¬ë“œ |  6.0 |  1.0 |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 | 105.0 | 65.0 | 60.0 | 33.0 | 25.0 | 22.0 |  6.0 | 324.0 | 510.0 | 526.0 | 0.663607 | 0.336393 |
  |   15 |         í•´ì»¤ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   3.0 |  2.0 |  6.0 |  2.0 |  1.0 |  1.0 |  0.0 |  15.0 |  15.0 |  27.0 | 0.669148 | 0.330852 |
  |   12 |         íŒ»ë”˜ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  1.0 |  0.0 |  17.0 | 16.0 | 10.0 | 10.0 |  9.0 |  1.0 |  1.0 |  65.0 |  99.0 | 110.0 | 0.670114 | 0.329886 |
  |    8 |         ì†Œì‚¬ |  1.0 |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  17.0 |  5.0 | 11.0 | 11.0 |  2.0 |  2.0 |  0.0 |  50.0 |  66.0 |  88.0 | 0.672582 | 0.327418 |
  |    6 |         ìƒ˜ìŠ¨ |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  23.0 | 21.0 | 13.0 | 20.0 |  8.0 |  5.0 |  2.0 |  93.0 | 132.0 | 162.0 | 0.673026 | 0.326974 |
  |    9 |         ì›¨ë²„ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   4.0 |  4.0 |  3.0 |  4.0 |  2.0 |  2.0 |  0.0 |  19.0 |  24.0 |  36.0 | 0.685338 | 0.314662 |
  |   11 |       íƒˆë³´íŠ¸ |  1.0 |  1.0 |  3.0 |  1.0 |  0.0 |  0.0 |  0.0 |  30.0 | 39.0 | 28.0 | 24.0 |  9.0 |  7.0 |  6.0 | 149.0 | 207.0 | 287.0 | 0.691225 | 0.308775 |
  |   17 |     í›„ë­ì½”í”„ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   0.0 |  0.0 |  1.0 |  1.0 |  0.0 |  0.0 |  0.0 |   2.0 |   0.0 |   5.0 | 0.714286 | 0.285714 |

* ì´ë ‡ê²Œ í•´ì„œ ì œêµ¬ë ¥ì„ í‰ê°€í•˜ëŠ” ì§€í‘œë¥¼ ì‚°ì¶œí•˜ê³  ì•„ì›ƒ í™•ë¥ ê¹Œì§€ ë„ì¶œí•˜ëŠ” í•¨ìˆ˜ê°€ ëª¨ë‘ ì™„ì„± ë¨

* ì´ì œ í•´ë‹¹ ê³¼ì •ì„ 2019ë…„ë„ ë°ì´í„°ì— ì ìš©í•´ ìŠ¤ì¹´ìš°íŠ¸í•˜ê³ ì í•˜ëŠ” íˆ¬ìˆ˜ë¥¼ ì„ ë°œí•´ ë´„

  > 2019ë…„ë„ ë°ì´í„°ì— ì ìš©

  ```python
  edgePitches_19 = \
  (atKbo_19_StatCast.query(
      '(plate_x >= 0.8 & plate_x <= 1.2 & plate_z <= 3.7 & plate_z >= 1.3) | \
       (plate_x <= -0.8 & plate_x >= -1.2 & plate_z <= 3.7 & plate_z >= 1.3) | \
       (plate_x >= -0.8 & plate_x <= 0.8 & plate_z <= 1.7 & plate_z >= 1.3) | \
       (plate_x >= -0.8 & plate_x <= 0.8 & plate_z <= 3.7 & plate_z >= 3.3)').
   query('pitch_name.notnull()', engine='python').
   query('description == "called_strike"'))
  
  coordEdge_19 = \
  (edgePitches_19[['pitcher_name', 'pitch_name', 'game_date']].
   groupby(['pitcher_name', 'pitch_name']).
   count().
   groupby('pitcher_name').
   apply(lambda x : x / x.sum()).
   query('game_date >= 0.1').
   groupby('pitcher_name').
   count())
  
  MLB_19_InningSummary = (atKbo_19_StatCast.query('events.notnull()', engine = 'python').
                          groupby(['pitcher_name', 'game_date']).
                          apply(getInningResult))
  
  MLB_19_InningSummary = (MLB_19_InningSummary.
                          groupby('pitcher_name').
                          sum()[sorted(MLB_19_InningSummary.columns)])
  
  MLB_19_InningSummary = MLB_19_InningSummary.reset_index()
  
  MLB_19_InningSummary = makeOutProb(MLB_19_InningSummary)
  MLB_19_InningSummary.sort_values('outProb', ascending=False)
  ```

  |      | pitcher_name | I_10 | I_11 | I_12 | I_13 | I_15 |   I_3 |  I_4 |  I_5 |  I_6 |  I_7 |  I_8 |  I_9 |    C1 |    C2 |    C3 |    Delta |  outProb |
  | ---: | -----------: | ---: | ---: | ---: | ---: | ---: | ----: | ---: | ---: | ---: | ---: | ---: | ---: | ----: | ----: | ----: | -------: | -------: |
  |    3 |       ì„œí´ë“œ |  0.0 |  1.0 |  0.0 |  0.0 |  0.0 |  38.0 | 31.0 | 28.0 | 16.0 |  7.0 |  3.0 |  1.0 | 125.0 | 207.0 | 161.0 | 0.622278 | 0.377722 |
  |    0 |     ë£¨ì¹œìŠ¤í‚¤ |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  24.0 | 11.0 | 14.0 |  7.0 |  1.0 |  3.0 |  2.0 |  63.0 | 105.0 |  87.0 | 0.635756 | 0.364244 |
  |    5 |       ìš”í‚¤ì‹œ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   4.0 |  3.0 |  4.0 |  3.0 |  0.0 |  0.0 |  1.0 |  15.0 |  21.0 |  23.0 | 0.648073 | 0.351927 |
  |   12 |       í—¤ì¼ë¦¬ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |   7.0 |  6.0 |  8.0 |  3.0 |  2.0 |  2.0 |  0.0 |  28.0 |  39.0 |  43.0 | 0.648175 | 0.351825 |
  |    6 |       ìœŒëœë“œ |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  20.0 | 11.0 |  6.0 |  7.0 |  5.0 |  3.0 |  1.0 |  54.0 |  93.0 |  81.0 | 0.652780 | 0.347220 |
  |   10 |         í„°ë„ˆ |  4.0 |  3.0 |  0.0 |  0.0 |  1.0 | 105.0 | 89.0 | 71.0 | 51.0 | 22.0 | 16.0 |  8.0 | 370.0 | 582.0 | 575.0 | 0.655363 | 0.344637 |
  |    1 |     ë§¥ê³¼ì´ì–´ |  0.0 |  0.0 |  0.0 |  0.0 |  0.0 |  14.0 | 13.0 |  9.0 |  6.0 |  3.0 |  3.0 |  4.0 |  52.0 |  81.0 |  87.0 | 0.668831 | 0.331169 |
  |    4 |     ì•Œì¹¸íƒ€ë¼ |  0.0 |  0.0 |  0.0 |  1.0 |  0.0 |  15.0 |  8.0 |  8.0 |  9.0 |  3.0 |  3.0 |  0.0 |  47.0 |  69.0 |  80.0 | 0.669846 | 0.330154 |
  |    8 |         ì¼ˆë¦¬ |  1.0 |  2.0 |  1.0 |  0.0 |  0.0 |  23.0 | 20.0 | 18.0 |  8.0 |  9.0 |  2.0 |  1.0 |  85.0 | 129.0 | 144.0 | 0.670181 | 0.329819 |
  |   11 |         í†°ìŠ¨ |  0.0 |  0.0 |  1.0 |  0.0 |  0.0 |  31.0 | 29.0 | 15.0 | 13.0 | 12.0 |  7.0 |  5.0 | 113.0 | 180.0 | 191.0 | 0.671605 | 0.328395 |
  |    2 |       ë²„í‹€ëŸ¬ |  3.0 |  0.0 |  4.0 |  0.0 |  1.0 |  72.0 | 57.0 | 58.0 | 31.0 | 22.0 | 12.0 |  5.0 | 265.0 | 387.0 | 456.0 | 0.671711 | 0.328289 |
  |    7 |       ì±„ë“œë²¨ |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |  16.0 | 17.0 | 15.0 |  9.0 | 10.0 |  4.0 |  1.0 |  73.0 |  99.0 | 130.0 | 0.675697 | 0.324303 |
  |    9 |     ì¿ ì—ë°”ìŠ¤ |  1.0 |  0.0 |  0.0 |  0.0 |  0.0 |   2.0 |  6.0 |  8.0 |  4.0 |  2.0 |  1.0 |  0.0 |  24.0 |  24.0 |  48.0 | 0.689898 | 0.310102 |

* 2019ë…„ë„ ìŠ¤ì¹´ìš°íŠ¸ ëŒ€ìƒ íˆ¬ìˆ˜ë³„ MLB ë¦¬ê·¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì•„ì›ƒ í™•ë¥ ì´ ì‚°ì¶œë¨

* ì´ ì¤‘ì—ì„œ ì œêµ¬ë ¥ì´ ê°€ì¥ ë›°ì–´ë‚œ ì„ ìˆ˜ê°€ ëˆ„êµ¬ì¸ì§€ í™•ì¸

  > ì œêµ¬ë ¥ì´ ê°€ì¥ ë›°ì–´ë‚œ ì„ ìˆ˜

  ```python
  coordEdge_19 = coordEdge_19.reset_index().rename(columns={'game_date':'num_pitches'})
  
  coordEdge_19.sort_values('num_pitches', ascending = False)
  ```

  |      | pitcher_name | num_pitches |
  | ---: | -----------: | ----------: |
  |    0 |     ë£¨ì¹œìŠ¤í‚¤ |           4 |
  |    7 |       ì±„ë“œë²¨ |           4 |
  |    9 |     ì¿ ì—ë°”ìŠ¤ |           4 |
  |    1 |     ë§¥ê³¼ì´ì–´ |           3 |
  |    3 |       ì„œí´ë“œ |           3 |
  |    4 |     ì•Œì¹¸íƒ€ë¼ |           3 |
  |    5 |       ìš”í‚¤ì‹œ |           3 |
  |    8 |         ì¼ˆë¦¬ |           3 |
  |   10 |         í„°ë„ˆ |           3 |
  |   11 |         í†°ìŠ¨ |           3 |
  |   12 |       í—¤ì¼ë¦¬ |           3 |
  |    2 |       ë²„í‹€ëŸ¬ |           2 |
  |    6 |       ìœŒëœë“œ |           2 |

* 2019ë…„ë„ ì‹ ì… íˆ¬ìˆ˜ ì¤‘ ì œêµ¬ë ¥ì´ ê°€ì¥ ë†’ì€ íˆ¬ìˆ˜ëŠ” ë£¨ì¹œìŠ¤í‚¤, ì±„ë“œë²¨ ì¿ ì—ë°”ìŠ¤ì„

  *  í•´ë‹¹ íˆ¬ìˆ˜ ì¤‘ ìµœì¢… 2ëª…ì„ ì„ ë°œí•˜ê¸° ìœ„í•´ ì•„ì›ƒ í™•ë¥ ì„ í™•ì¸
  * ë£¨ì¹œìŠ¤í‚¤ì˜ ì•„ì›ƒ í™•ë¥ ì€ 0.364, ì±„ë“œë²¨ì€ 0.324, ì¿ ì—ë°”ìŠ¤ëŠ” 0.310ì´ë¯€ë¡œ, ë£¨ì¹œìŠ¤í‚¤ì™€ ì±„ë“œë²¨ì„ ìµœì¢…ì ìœ¼ë¡œ ìŠ¤ì¹´ìš°íŒ…í•¨

* ì´ë²ˆ ì˜ˆì‹œì—ì„œëŠ” íˆ¬ìˆ˜ì˜ ëŠ¥ë ¥ì„ í‰ê°€í•˜ê¸° ìœ„í•´ íˆ¬êµ¬ì˜ ì¢Œí‘œ ë°ì´í„°ë§Œ í™œìš©í–ˆì§€ë§Œ, ê·¸ ì™¸ì—ë„ ìŠ¤íƒ¯ìºìŠ¤íŠ¸ ë°ì´í„°ì— ìˆëŠ” êµ¬ì† ë°œì‚¬ ê°ë„, ë³¼ ë°°í•© êµ¬ì¡° ë“±ì„ í™œìš©í•œë‹¤ë©´ ì¢€ ë” í’ë¶€í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ë°œêµ´í•  ìˆ˜ ìˆì„ ê²ƒì„
